<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Population Globe with Zoom</title>
  <style>
    body { 
      margin: 0; 
      overflow: hidden; 
      background: #000;

      font-family: -apple-system, BlinkMacSystemFont,
                   "Segoe UI", Roboto,
                   "Helvetica Neue", Arial,
                   sans-serif;

      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    canvas { display: block; }
    #searchContainer {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 340px;
      z-index: 10;
    }

    #citySearch {
      width: 100%;
      padding: 12px 20px;
      border-radius: 40px;
      border: 1.5px solid rgba(255, 255, 255, 0.9);
      outline: none;
      background: #000;
      color: #fff;
      font-size: 15px;
      letter-spacing: 0.5px;
      box-shadow: 0 0 18px rgba(255,255,255,0.06);
      transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    #citySearch:focus {
      border: 1.5px solid #ffffff;
      box-shadow: 0 0 12px rgba(255,255,255,0.4);
    }

    #searchResults {
      margin-top: 8px;
      background: rgba(0,0,0,0.96);
      border-radius: 14px;
      max-height: 210px; /* ~5 results */
      overflow-y: auto;
      display: none;
      box-shadow: 0 0 15px rgba(255,255,255,0.04);
    }

   .searchItem {
      padding: 10px 14px;
      cursor: pointer;
      color: #fff;
      font-size: 14px;
    }

    .searchItem:hover {
      background: rgba(255,255,255,0.08);
    }

    #cityList {
      display: none;
      position: absolute; top: 5px; right: -500px; width: 250px; max-height: 85vh; overflow-y: auto;
      background: rgba(0,0,0,0.75); color: #fff; padding: 8px; font-size: 10px; border-radius: 8px;
    }
    #cityList ul { list-style: none; padding: 0; margin: 0; }
    #cityList li { margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.08); padding-bottom: 3px; }
    #cityList li:last-child { border-bottom: none; }
    #infoPanel {
      position: fixed; bottom: -300px; left: 0; width: 100%; height: 260px;
      background: rgba(0,0,0,0.95); color: white; padding: 20px; box-sizing: border-box;
      transition: bottom 0.4s ease; overflow-y: auto; border-top: 2px solid rgba(255,255,255,0.1);
    }
    #infoPanel.active { bottom: 0; }
    #infoPanel a { color: #4da6ff; text-decoration: none; display: block; margin-bottom: 8px; }
    #infoPanel a:hover { text-decoration: underline; }

    #infoPanel button.closePanel {
      position: absolute;
      top: 10px;
      right: 15px;
      background: #444;
      color: #fff;
      border: none;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 12px;
      border-radius: 4px;
    }
    #infoPanel button.closePanel:hover {
       background: #666;
    }

    .cityBubble {
      position: absolute;
      pointer-events: none;
      transform: translate(-50%, -140%);
      transition: opacity 0.2s ease, transform 0.2s ease;
      font-size: 11px;
      color: #fff;
      white-space: nowrap;
    }

    .bubbleContent {
      background: rgba(0, 0, 0, 0.88);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 6px 10px;
      border-radius: 10px;
      backdrop-filter: blur(6px);
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
    }

    .bubbleTitle {
      font-weight: 600;
      font-size: 12px;
      margin-bottom: 2px;
    }

    .bubbleMeta {
      font-size: 10px;
      opacity: 0.7;
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .bubbleWrapper {
      position: relative;
      display: inline-block;
    }

    .bubbleOutline {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .bubbleRect {
      fill: rgba(0, 0, 0, 0.88);
      stroke: rgba(255, 255, 255, 0.4);
      stroke-width: 1.2;
    }

    .bubbleContent {
      position: relative;
      padding: 6px 12px;
      border-radius: 12px;
      color: #fff;
      white-space: nowrap;
    }

    .cityBubble.hovered .bubbleContent {
      animation: bubblePulse 7s ease-in-out infinite;
    }

    @keyframes electricPulse {
      0% {
        box-shadow:
          0 0 6px rgba(255,255,255,0.08),
          0 0 0px rgba(0,150,255,0);
      }
      35% {
        box-shadow:
          0 0 18px rgba(255,255,255,0.35),
          0 0 28px rgba(0,150,255,0.6);
      }
      70% {
        box-shadow:
          0 0 10px rgba(255,255,255,0.2),
          0 0 14px rgba(0,150,255,0.3);
      }
      100% {
        box-shadow:
          0 0 6px rgba(255,255,255,0.08),
          0 0 0px rgba(0,150,255,0);
      }
    }


/* ===============================
   Compass
=============================== */

#compass {

  position: absolute;
  top: 20px;
  right: 20px;

  width: 56px;
  height: 56px;

  border-radius: 50%;

  backdrop-filter: blur(12px);
  background: rgba(0, 0, 0, 0.65);
  border: 1px solid rgba(255,255,255,0.25);

  display: flex;
  align-items: center;
  justify-content: center;

  cursor: pointer;
  user-select: none;

  z-index: 30;

  transition: transform 0.2s ease;
}

#compass:hover {
  transform: scale(1.08);
}

.compass-svg {
  width: 100%;
  height: 100%;
}

.compass-circle {
  fill: none;
  stroke: rgba(255,255,255,0.5);
  stroke-width: 2;
}

.compass-letter {
  fill: white;
  font-size: 12px;
  font-weight: 600;
  opacity: 0.9;
}

.compass-arrow-line {
  stroke: white;
  stroke-width: 2;
}

.compass-arrow-head {
  fill: red;
}

.compass-tick {
  stroke: rgba(255,255,255,0.6);
  stroke-width: 1;
}

.compass-tick.major {
  stroke-width: 2;
}




  </style>
</head>

<body>
  <div id="cityList"><h3>Geopolitical Cities</h3><ul id="list"></ul></div>
  <div id="infoPanel"><div id="panelContent"></div></div>
  <div id="cityLabels" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"></div>
  <svg id="uiOverlay"
       style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:5;">
    <line id="hoverLine"
        stroke="white"
        stroke-width="1"
        opacity="0"/>
  </svg>
  <div id="searchContainer">
    <input type="text" id="citySearch" placeholder="Search city..." />
    <div id="searchResults"></div>
  </div>

<!-- Compass Widget -->
<div id="compass">
  <svg class="compass-svg" viewBox="0 0 100 100">
    
    <!-- Outer Ring -->
    <circle cx="50" cy="50" r="46" class="compass-circle" />

    <!-- Tick Marks -->
    <g class="compass-ticks"></g>

    <!-- Cardinal Letters -->
    <text x="50" y="18" text-anchor="middle" class="compass-letter">N</text>
    <text x="50" y="92" text-anchor="middle" class="compass-letter">S</text>
    <text x="8" y="54" text-anchor="middle" class="compass-letter">W</text>
    <text x="92" y="54" text-anchor="middle" class="compass-letter">E</text>

    <!-- Arrow -->
    <line x1="50" y1="50" x2="50" y2="25" class="compass-arrow-line"/>
    <polygon points="50,15 45,25 55,25" class="compass-arrow-head"/>

  </svg>
</div>




  <script type="module">
    import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js";

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 3;

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

          // ===============================
      // Window Resize Handling
      // ===============================

      window.addEventListener("resize", () => {

        const width = window.innerWidth;
        const height = window.innerHeight;

        renderer.setSize(width, height);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        camera.aspect = width / height;
        camera.updateProjectionMatrix();

      });


    const radius = 1;

    // Smooth zoom target
    let targetZoom = camera.position.z;
    let zoomVelocity = 0;
    const zoomFriction = 0.92;


    /* ===============================
       Load Earth texture and initialize
    =============================== */
    const loader = new THREE.TextureLoader();
    const earthTexture = loader.load(
      "https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg",
      () => init()
    );

    function init() {
      // Earth points
      const earthPointCount = 10000;
      const earthPositions = [];
      const earthColors = [];
      const earthBaseBrightness = [];

      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = earthTexture.image.width;
      canvas.height = earthTexture.image.height;
      ctx.drawImage(earthTexture.image, 0, 0);
      const imageData = ctx.getImageData(0,0,canvas.width,canvas.height).data;

      for(let i=0;i<earthPointCount;i++){
        const u=Math.random(), v=Math.random();
        const theta = 2*Math.PI*u;
        const phi = Math.acos(2*v-1);
        const x = radius*Math.sin(phi)*Math.cos(theta);
        const y = radius*Math.cos(phi);
        const z = radius*Math.sin(phi)*Math.sin(theta);
        earthPositions.push(x,y,z);
        const lon=Math.atan2(z,x), lat=Math.asin(y/radius);
        const uTex=(lon/(2*Math.PI))+0.5;
        const vTex=0.5-(lat/Math.PI);
        const px = Math.floor(uTex*canvas.width), py = Math.floor(vTex*canvas.height);
        const idx=(py*canvas.width+px)*4;
        const r=imageData[idx], g=imageData[idx+1], b=imageData[idx+2];
        const bright = (r+g+b)/3;
        const c = bright>120 ? 0.2 : 1.0;
        earthColors.push(c,c,c);
        earthBaseBrightness.push(c);
      }

      const earthGeo = new THREE.BufferGeometry();
      earthGeo.setAttribute("position", new THREE.Float32BufferAttribute(earthPositions,3));
      earthGeo.setAttribute("color", new THREE.Float32BufferAttribute(earthColors,3));
      const earthMat = new THREE.PointsMaterial({ size:0.006, vertexColors:true, transparent:true, depthWrite:false });
      const earthPoints = new THREE.Points(earthGeo, earthMat);
      scene.add(earthPoints);

            // ------------------------------
      // Earth Twinkle System
      // ------------------------------

      const earthTwinkleChance = 0.04;
      const earthTwinkleDuration = 0.2;
      const earthTwinkleIntensity = 0.6;

      const earthTwinkleTimers = new Array(earthPointCount).fill(0);


      /* ===============================
         FULL CITY LIST GOES HERE
      =============================== */

      const cities = [
        {
          name: "Los Angeles",
          lat: 34.0522,
          lon: -118.2437,
          country: "United States",
          news: {
            name: "KTLA",
            site: "https://ktla.com/",
            rss: "https://ktla.com/news/local-news/feed"
          }
         },

        {
          name: "Bristol",
          lat: 51.4545,
          lon: -2.5879,
          country: "United Kingdom",
          news: {
            name: "Bristol Live",
            site: "https://www.bristolpost.co.uk/",
            rss: "https://www.bristolpost.co.uk/all-about/bristol/rss.xml"
          }
        },

        {
          name: "Isle of Man",
          lat: 54.1523,
          lon: -4.4861,
          country: "Isle of Man",
          news: {
            name: "Isle of Man Today",
            site: "https://www.iomtoday.co.im/",
            rss: "https://www.iomtoday.co.im/rss"
          }
        },

        {
          name: "Belfast",
          lat: 54.5973,
          lon: -5.9301,
          country: "United Kingdom",
          news: {
            name: "Belfast Live",
            site: "https://www.belfastlive.co.uk/",
            rss: "https://www.belfastlive.co.uk/all-about/belfast/rss.xml"
          }
        },

        {
          name: "Glasgow",
          lat: 55.8642,
          lon: -4.2518,
          country: "United Kingdom",
          news: {
            name: "Glasgow Live",
            site: "https://www.glasgowlive.co.uk/",
            rss: "https://www.glasgowlive.co.uk/all-about/glasgow/rss.xml"
          }
        },

        {
          name: "Cannes",
          lat: 43.5528,
          lon: 7.0174,
          country: "France",
          news: {
            name: "Nice-Matin",
            site: "https://www.nicematin.com/",
            rss: "https://www.nicematin.com/cannes/rss"
          }
        },

        {
          name: "Krakow",
          lat: 50.0647,
          lon: 19.9450,
          country: "Poland",
          news: {
            name: "Kraków Post",
            site: "https://www.krakowpost.com/",
            rss: "https://www.krakowpost.com/feed"
          }
        },

        {
          name: "Lodz",
          lat: 51.7592,
          lon: 19.4550,
          country: "Poland",
          news: {
            name: "Dziennik Łódzki",
            site: "https://dzienniklodzki.pl/",
            rss: "https://dzienniklodzki.pl/rss"
          }
        },

        {
          name: "Wroclaw",
          lat: 51.1079,
          lon: 17.0385,
          country: "Poland",
          news: {
            name: "Wroclaw.pl",
            site: "https://www.wroclaw.pl/",
            rss: "https://www.wroclaw.pl/rss"
          }
        },


        {
          name: "Cluj-Napoca",
          lat: 46.7712,
          lon: 23.6236,
          country: "Romania",
          news: {
            name: "Cluj24",
            site: "https://cluj24.ro/",
            rss: "https://cluj24.ro/feed"
          }
        },

        {
          name: "Skopje",
          lat: 41.9981,
          lon: 21.4254,
          country: "North Macedonia",
          news: {
            name: "Meta.mk",
            site: "https://meta.mk/",
            rss: "https://meta.mk/feed/"
          }
        },

        {
          name: "Ljubljana",
          lat: 46.0569,
          lon: 14.5058,
          country: "Slovenia",
          news: {
            name: "The Slovenia Times",
            site: "https://sloveniatimes.com/",
            rss: "https://sloveniatimes.com/feed/"
          }
        },


        {
          name: "Nis",
          lat: 43.3209,
          lon: 21.8958,
          country: "Serbia",
          news: {
            name: "Niške Vesti",
            site: "https://niskevesti.rs/",
            rss: "https://niskevesti.rs/feed/"
          }
        },

        {
          name: "Heraklion",
          lat: 35.3387,
          lon: 25.1442,
          country: "Greece",
          news: {
            name: "Creta24",
            site: "https://www.crete24.gr/",
            rss: "https://www.crete24.gr/feed/"
          }
        },


        {
          name: "Cagliari",
          lat: 39.2238,
          lon: 9.1217,
          country: "Italy",
          news: {
            name: "L'Unione Sarda",
            site: "https://www.unionesarda.it/",
            rss: "https://www.unionesarda.it/rss"
          }
        },


        {
          name: "Ajaccio",
          lat: 41.9192,
          lon: 8.7386,
          country: "France",
          news: {
            name: "Corse-Matin",
            site: "https://www.corsematin.com/",
            rss: "https://www.corsematin.com/rss"
          }
        },

        {
          name: "Rotterdam",
          lat: 51.9244,
          lon: 4.4777,
          country: "Netherlands",
          news: {
            name: "NL Times",
            site: "https://nltimes.nl/",
            rss: "https://nltimes.nl/rss"
          }
        },

        {
          name: "Hamburg",
          lat: 53.5511,
          lon: 9.9937,
          country: "Germany",
          news: {
            name: "Hamburger Abendblatt",
            site: "https://www.abendblatt.de/",
            rss: "https://www.abendblatt.de/rss"
          }
        },

        {
          name: "Budapest",
          lat: 47.4979,
          lon: 19.0402,
          country: "Hungary",
          news: {
            name: "Budapest Business Journal",
            site: "https://bbj.hu/",
            rss: "https://bbj.hu/feed"
          }
        },

        {
          name: "Podgorica",
          lat: 42.4304,
          lon: 19.2594,
          country: "Montenegro",
          news: {
            name: "Vijesti",
            site: "https://www.vijesti.me/",
            rss: "https://www.vijesti.me/rss"
          }
        },

        {
          name: "Oklahoma City",
          lat: 35.4676,
          lon: -97.5164,
          country: "United States",
          news: {
            name: "News 9",
            site: "https://www.news9.com/",
            rss: "https://www.news9.com/rss"
          }
        },

        {
          name: "Kansas City",
          lat: 39.0997,
          lon: -94.5786,
          country: "United States",
          news: {
            name: "The Kansas City Star",
            site: "https://www.kansascity.com/",
            rss: "https://www.kansascity.com/latest-news/?service=rss"
          }
        },

        {
          name: "Azores",
          lat: 37.7412,
          lon: -25.6756,
          country: "Portugal",
          news: {
            name: "Açoriano Oriental",
            site: "https://www.acorianooriental.pt/",
            rss: "https://www.acorianooriental.pt/rss"
          }
        },

        {
          name: "Ibiza",
          lat: 38.9067,
          lon: 1.4206,
          country: "Spain",
          news: {
            name: "Diario de Ibiza",
            site: "https://www.diariodeibiza.es/",
            rss: "https://www.diariodeibiza.es/rss"
          }
        },

        {
          name: "Bangalore",
          lat: 12.9716,
          lon: 77.5946,
          country: "India",
          news: {
            name: "The Hindu - Bengaluru",
            site: "https://www.thehindu.com/news/cities/bangalore/",
            rss: "https://www.thehindu.com/news/cities/bangalore/feeder/default.rss"
          }
        },

        {
          name: "Malabo",
          lat: 3.7500,
          lon: 8.7833,
          country: "Equatorial Guinea",
          news: {
            name: "Ahora EG",
            site: "https://ahoraeg.com/",
            rss: "https://ahoraeg.com/feed/"
          }
        },

        {
          name: "Guangzhou",
          lat: 23.1291,
          lon: 113.2644,
          country: "China",
          news: {
            name: "GDToday",
            site: "https://www.newsgd.com/",
            rss: "https://www.newsgd.com/node_99363/rss.xml"
          }
        },

        {
          name: "Bordeaux",
          lat: 44.8378,
          lon: -0.5792,
          country: "France",
          news: {
            name: "Sud Ouest",
            site: "https://www.sudouest.fr/",
            rss: "https://www.sudouest.fr/rss.xml"
          }
        },

        {
          name: "Burlington",
          lat: 44.4759,
          lon: -73.2121,
          country: "United States",
          news: {
            name: "WCAX",
            site: "https://www.wcax.com/",
            rss: "https://www.wcax.com/arc/outboundfeeds/rss/"
          }
        },

        {
          name: "Urumqi",
          lat: 43.8256,
          lon: 87.6168,
          country: "China",
          news: {
            name: "Tianshan Net",
            site: "http://www.ts.cn/",
            rss: "http://www.ts.cn/rss.xml"
          }
        },

        {
          name: "Monrovia",
          lat: 6.3156,
          lon: -10.8074,
          country: "Liberia",
          news: {
            name: "FrontPage Africa",
            site: "https://frontpageafricaonline.com/",
            rss: "https://frontpageafricaonline.com/feed/"
          }
        },

        {
          name: "Dar es Salaam",
          lat: -6.7924,
          lon: 39.2083,
          country: "Tanzania",
          news: {
            name: "The Citizen",
            site: "https://www.thecitizen.co.tz/",
            rss: "https://www.thecitizen.co.tz/arc/outboundfeeds/rss/"
          }
        },

        {
          name: "Murmansk",
          lat: 68.9585,
          lon: 33.0827,
          country: "Russia",
          news: {
            name: "SeverPost",
            site: "https://severpost.ru/",
            rss: "https://severpost.ru/rss"
          }
        },

        {
          name: "Harbin",
          lat: 45.8038,
          lon: 126.5349,
          country: "China",
          news: {
            name: "Harbin Daily",
            site: "http://www.my399.com/",
            rss: "http://www.my399.com/rss.xml"
          }
        },

        {
          name: "Sevastopol",
          lat: 44.6167,
          lon: 33.5254,
          country: "Russia",
          news: {
            name: "ForPost",
            site: "https://forpostsevastopol.ru/",
            rss: "https://forpostsevastopol.ru/feed/"
          }
        },

        {
          name: "Norilsk",
          lat: 69.3558,
          lon: 88.1893,
          country: "Russia",
          news: {
            name: "Taimyr Telegraph",
            site: "https://www.ttelegraf.ru/",
            rss: "https://www.ttelegraf.ru/rss"
          }
        },

        {
          name: "Kandahar",
          lat: 31.6289,
          lon: 65.7372,
          country: "Afghanistan",
          news: {
            name: "Pajhwok Afghan News",
            site: "https://pajhwok.com/",
            rss: "https://pajhwok.com/feed/"
          }
        },

        {
          name: "Lille",
          lat: 50.6292,
          lon: 3.0573,
          country: "France",
          news: {
            name: "La Voix du Nord",
            site: "https://www.lavoixdunord.fr/",
            rss: "https://www.lavoixdunord.fr/rss"
          }
        },

        {
          name: "Rouen",
          lat: 49.4431,
          lon: 1.0993,
          country: "France",
          news: {
            name: "Paris-Normandie",
            site: "https://www.paris-normandie.fr/",
            rss: "https://www.paris-normandie.fr/rss"
          }
        },

        {
          name: "Dijon",
          lat: 47.3220,
          lon: 5.0415,
          country: "France",
          news: {
            name: "Le Bien Public",
            site: "https://www.bienpublic.com/",
            rss: "https://www.bienpublic.com/rss"
          }
        },

        {
          name: "Svalbard",
          lat: 78.2232,
          lon: 15.6469,
          country: "Norway",
          news: {
            name: "Svalbardposten",
            site: "https://www.svalbardposten.no/",
            rss: "https://www.svalbardposten.no/rss"
          }
        },

        {
          name: "San Jose",
          lat: 9.9281,
          lon: -84.0907,
          country: "Costa Rica",
          news: {
            name: "La Nación",
            site: "https://www.nacion.com/",
            rss: "https://www.nacion.com/rss/"
          }
        },

        {
          name: "Abidjan",
          lat: 5.3599,
          lon: -4.0083,
          country: "Ivory Coast",
          news: {
            name: "Abidjan.net",
            site: "https://www.abidjan.net/",
            rss: "https://www.abidjan.net/rss/"
          }
        },

        {
          name: "Memphis",
          lat: 35.1495,
          lon: -90.0490,
          country: "United States",
          news: {
            name: "WREG News Channel 3",
            site: "https://wreg.com/",
            rss: "https://wreg.com/feed/"
          }
        },

        {
          name: "Alexandria",
          lat: 31.2001,
          lon: 29.9187,
          country: "Egypt",
          news: {
            name: "Ahram Online",
            site: "https://english.ahram.org.eg/",
            rss: "https://english.ahram.org.eg/RSS.aspx"
          }
        },

        {
          name: "Cleveland",
          lat: 41.4993,
          lon: -81.6944,
          country: "United States",
          news: {
            name: "WEWS News 5",
            site: "https://www.news5cleveland.com/",
            rss: "https://www.news5cleveland.com/rss"
          }
        },

        {
          name: "Maracaibo",
          lat: 10.6545,
          lon: -71.6406,
          country: "Venezuela",
          news: {
            name: "Panorama",
            site: "https://www.panorama.com.ve/",
            rss: "https://www.panorama.com.ve/rss/"
          }
        },

        {
          name: "Birmingham",
          lat: 33.5186,
          lon: -86.8104,
          country: "United States",
          news: {
            name: "AL.com",
            site: "https://www.al.com/",
            rss: "https://www.al.com/rss/"
          }
        },

        {
          name: "Quebec City",
          lat: 46.8139,
          lon: -71.2080,
          country: "Canada",
          news: {
            name: "Le Soleil",
            site: "https://www.lesoleil.com/",
            rss: "https://www.lesoleil.com/rss.xml"
          }
        },

        {
          name: "Orlando",
          lat: 28.5383,
          lon: -81.3792,
          country: "United States",
          news: {
            name: "Orlando Sentinel",
            site: "https://www.orlandosentinel.com/",
            rss: "https://www.orlandosentinel.com/arcio/rss/category/news/"
          }
        },

        {
          name: "Halifax",
          lat: 44.6488,
          lon: -63.5752,
          country: "Canada",
          news: {
            name: "CBC News - Nova Scotia",
            site: "https://www.cbc.ca/news/canada/nova-scotia",
            rss: "https://www.cbc.ca/cmlink/rss-canada-ns"
          }
        },

        {
          name: "Virginia Beach",
          lat: 36.8529,
          lon: -75.9780,
          country: "United States",
          news: {
            name: "The Virginian-Pilot",
            site: "https://www.pilotonline.com/",
            rss: "https://www.pilotonline.com/arcio/rss/category/news/"
          }
        },

        {
          name: "Portland",
          lat: 43.6591,
          lon: -70.2568,
          country: "United States",
          news: {
            name: "Portland Press Herald",
            site: "https://www.pressherald.com/",
            rss: "https://www.pressherald.com/feed/"
          }
        },

        {
          name: "Key West",
          lat: 24.5551,
          lon: -81.7800,
          country: "United States",
          news: {
            name: "Keys Weekly",
            site: "https://keysweekly.com/",
            rss: "https://keysweekly.com/feed/"
          }
        },

        {
          name: "Nassau",
          lat: 25.0443,
          lon: -77.3504,
          country: "Bahamas",
          news: {
            name: "The Nassau Guardian",
            site: "https://thenassauguardian.com/",
            rss: "https://thenassauguardian.com/feed/"
          }
        },

        {
          name: "Cebu City",
          lat: 10.3157,
          lon: 123.8854,
          country: "Philippines",
          news: {
            name: "SunStar Cebu",
            site: "https://www.sunstar.com.ph/cebu",
            rss: "https://www.sunstar.com.ph/rss/cebu"
          }
        },

        {
          name: "Belmopan",
          lat: 17.2514,
          lon: -88.7590,
          country: "Belize",
          news: {
            name: "Amandala",
            site: "https://amandala.com.bz/",
            rss: "https://amandala.com.bz/feed/"
          }
        },

        {
          name: "Medellin",
          lat: 6.2442,
          lon: -75.5812,
          country: "Colombia",
          news: {
            name: "El Colombiano",
            site: "https://www.elcolombiano.com/",
            rss: "https://www.elcolombiano.com/rss"
          }
        },

        {
          name: "Cartagena",
          lat: 10.3910,
          lon: -75.4794,
          country: "Colombia",
          news: {
            name: "El Universal",
            site: "https://www.eluniversal.com.co/",
            rss: "https://www.eluniversal.com.co/rss"
          }
        },

        {
          name: "Sucre",
          lat: -19.0196,
          lon: -65.2619,
          country: "Bolivia",
          news: {
            name: "Correo del Sur",
            site: "https://correodelsur.com/",
            rss: "https://correodelsur.com/rss"
          }
        },

        {
          name: "Port of Spain",
          lat: 10.6549,
          lon: -61.5019,
          country: "Trinidad and Tobago",
          news: {
            name: "Trinidad and Tobago Guardian",
            site: "https://www.guardian.co.tt/",
            rss: "https://www.guardian.co.tt/rss"
          }
        },

        {
          name: "Irkutsk",
          lat: 52.2869,
          lon: 104.3050,
          country: "Russia",
          news: {
            name: "IrkutskMedia",
            site: "https://irkutskmedia.ru/",
            rss: "https://irkutskmedia.ru/rss"
          }
        },

        {
          name: "Kazan",
          lat: 55.7903,
          lon: 49.1125,
          country: "Russia",
          news: {
            name: "Tatar-inform",
            site: "https://www.tatar-inform.ru/",
            rss: "https://www.tatar-inform.ru/rss"
          }
        },

        {
          name: "Grozny",
          lat: 43.3178,
          lon: 45.6986,
          country: "Russia",
          news: {
            name: "Grozny Inform",
            site: "https://grozny-inform.ru/",
            rss: "https://grozny-inform.ru/rss"
          }
        },

        {
          name: "Makhachkala",
          lat: 42.9849,
          lon: 47.5047,
          country: "Russia",
          news: {
            name: "Chernovik",
            site: "https://chernovik.net/",
            rss: "https://chernovik.net/rss"
          }
        },

        {
          name: "Asuncion",
          lat: -25.2637,
          lon: -57.5759,
          country: "Paraguay",
          news: {
            name: "ABC Color",
            site: "https://www.abc.com.py/",
            rss: "https://www.abc.com.py/rss/"
          }
        },

        {
          name: "Montevideo",
          lat: -34.9011,
          lon: -56.1645,
          country: "Uruguay",
          news: {
            name: "El País",
            site: "https://www.elpais.com.uy/",
            rss: "https://www.elpais.com.uy/rss/"
          }
        },

        {
          name: "Punta Arenas",
          lat: -53.1638,
          lon: -70.9171,
          country: "Chile",
          news: {
            name: "La Prensa Austral",
            site: "https://www.laprensaaustral.cl/",
            rss: "https://www.laprensaaustral.cl/feed/"
          }
        },

        {
          name: "Omsk",
          lat: 54.9885,
          lon: 73.3242,
          country: "Russia",
          news: {
            name: "Om1.ru",
            site: "https://www.om1.ru/",
            rss: "https://www.om1.ru/rss"
          }
        },

        {
          name: "Cordoba",
          lat: -31.4201,
          lon: -64.1888,
          country: "Argentina",
          news: {
            name: "La Voz del Interior",
            site: "https://www.lavoz.com.ar/",
            rss: "https://www.lavoz.com.ar/rss"
          }
        },

        {
          name: "Arequipa",
          lat: -16.4090,
          lon: -71.5375,
          country: "Peru",
          news: {
            name: "El Pueblo",
            site: "https://www.elpueblo.com.pe/",
            rss: "https://www.elpueblo.com.pe/feed/"
          }
        },

        {
          name: "Bandar Seri Begawan",
          lat: 4.9031,
          lon: 114.9398,
          country: "Brunei",
          news: {
            name: "Borneo Bulletin",
            site: "https://borneobulletin.com.bn/",
            rss: "https://borneobulletin.com.bn/feed/"
          }
        },

        {
          name: "Kolkata",
          lat: 22.5726,
          lon: 88.3639,
          country: "India",
          news: {
            name: "The Telegraph - Kolkata",
            site: "https://www.telegraphindia.com/west-bengal",
            rss: "https://www.telegraphindia.com/rss/west-bengal"
          }
        },

        {
          name: "Kaliningrad",
          lat: 54.7104,
          lon: 20.4522,
          country: "Russia",
          news: {
            name: "Klops",
            site: "https://klops.ru/",
            rss: "https://klops.ru/rss"
          }
        },

        {
          name: "Islamabad",
          lat: 33.6844,
          lon: 73.0479,
          country: "Pakistan",
          news: {
            name: "Dawn",
            site: "https://www.dawn.com/",
            rss: "https://www.dawn.com/feeds/home"
          }
        },

        {
          name: "Lahore",
          lat: 31.5204,
          lon: 74.3587,
          country: "Pakistan",
          news: {
            name: "The News International",
            site: "https://www.thenews.com.pk/",
            rss: "https://www.thenews.com.pk/rss/1/10"
          }
        },

        {
          name: "Dili",
          lat: -8.5569,
          lon: 125.5603,
          country: "East Timor",
          news: {
            name: "Tatoli",
            site: "http://www.tatoli.tl/",
            rss: "http://www.tatoli.tl/feed/"
          }
        },

        {
          name: "Nouakchott",
          lat: 18.0735,
          lon: -15.9582,
          country: "Mauritania",
          news: {
            name: "AMI - Agence Mauritanienne d'Information",
            site: "http://www.ami.mr/",
            rss: "http://www.ami.mr/rss"
          }
        },

        {
          name: "N'Djamena",
          lat: 12.1348,
          lon: 15.0557,
          country: "Chad",
          news: {
            name: "Alwihda Info",
            site: "https://www.alwihdainfo.com/",
            rss: "https://www.alwihdainfo.com/xml/rss_2.0.xml"
          }
        },

        {
          name: "Yaounde",
          lat: 3.8480,
          lon: 11.5021,
          country: "Cameroon",
          news: {
            name: "Cameroon Tribune",
            site: "https://www.cameroon-tribune.cm/",
            rss: "https://www.cameroon-tribune.cm/rss"
          }
        },

        {
          name: "Bamako",
          lat: 12.6392,
          lon: -8.0029,
          country: "Mali",
          news: {
            name: "Maliweb",
            site: "https://www.maliweb.net/",
            rss: "https://www.maliweb.net/feed/"
          }
        },

        {
          name: "Dakar",
          lat: 14.7167,
          lon: -17.4677,
          country: "Senegal",
          news: {
            name: "SeneNews",
            site: "https://www.senenews.com/",
            rss: "https://www.senenews.com/feed/"
          }
        },

        {
          name: "Canary Islands",
          lat: 28.1235,
          lon: -15.4363,
          country: "Spain",
          news: {
            name: "Canarias7",
            site: "https://www.canarias7.es/",
            rss: "https://www.canarias7.es/rss/"
          }
        },

        {
          name: "Ouagadougou",
          lat: 12.3714,
          lon: -1.5197,
          country: "Burkina Faso",
          news: {
            name: "Sidwaya",
            site: "https://www.sidwaya.info/",
            rss: "https://www.sidwaya.info/feed/"
          }
        },

        {
          name: "Antananarivo",
          lat: -18.8792,
          lon: 47.5079,
          country: "Madagascar",
          news: {
            name: "L'Express de Madagascar",
            site: "https://www.lexpress.mg/",
            rss: "https://www.lexpress.mg/feed/"
          }
        },

        {
          name: "Lusaka",
          lat: -15.3875,
          lon: 28.3228,
          country: "Zambia",
          news: {
            name: "Lusaka Times",
            site: "https://www.lusakatimes.com/",
            rss: "https://www.lusakatimes.com/feed/"
          }
        },

        {
          name: "Maputo",
          lat: -25.9692,
          lon: 32.5732,
          country: "Mozambique",
          news: {
            name: "Club of Mozambique",
            site: "https://clubofmozambique.com/",
            rss: "https://clubofmozambique.com/feed/"
          }
        },

        {
          name: "Harare",
          lat: -17.8252,
          lon: 31.0335,
          country: "Zimbabwe",
          news: {
            name: "The Herald",
            site: "https://www.herald.co.zw/",
            rss: "https://www.herald.co.zw/feed/"
          }
        },

        {
          name: "Palau",
          lat: 7.5000,
          lon: 134.6242,
          country: "Palau",
          news: {
            name: "Island Times",
            site: "https://islandtimes.org/",
            rss: "https://islandtimes.org/feed/"
          }
        },

        {
          name: "Nauru",
          lat: -0.5477,
          lon: 166.9209,
          country: "Nauru",
          news: {
            name: "Nauru Bulletin",
            site: "http://www.naurugov.nr/",
            rss: "http://www.naurugov.nr/rss.aspx"
          }
        },

        {
          name: "Cape Town",
          lat: -33.9249,
          lon: 18.4241,
          country: "South Africa",
          news: {
            name: "News24 - Western Cape",
            site: "https://www.news24.com/news24/southafrica/westerncape",
            rss: "https://www.news24.com/rss/News24/WesternCape"
          }
        },

        {
          name: "Pretoria",
          lat: -25.7479,
          lon: 28.2293,
          country: "South Africa",
          news: {
            name: "Pretoria News",
            site: "https://www.iol.co.za/pretoria-news",
            rss: "https://www.iol.co.za/rss/pretoria-news"
          }
        },

        {
          name: "Maseru",
          lat: -29.3142,
          lon: 27.4833,
          country: "Lesotho",
          news: {
            name: "Lesotho Times",
            site: "https://lestimes.com/",
            rss: "https://lestimes.com/feed/"
          }
        },

        {
          name: "Bujumbura",
          lat: -3.3614,
          lon: 29.3599,
          country: "Burundi",
          news: {
            name: "Iwacu",
            site: "https://www.iwacu-burundi.org/",
            rss: "https://www.iwacu-burundi.org/feed/"
          }
        },

        {
          name: "Asmara",
          lat: 15.3229,
          lon: 38.9251,
          country: "Eritrea",
          news: {
            name: "Shabait",
            site: "http://www.shabait.com/",
            rss: "http://www.shabait.com/rss"
          }
        },

        {
          name: "Mecca",
          lat: 21.3891,
          lon: 39.8579,
          country: "Saudi Arabia",
          news: {
            name: "Saudi Gazette",
            site: "https://saudigazette.com.sa/",
            rss: "https://saudigazette.com.sa/feed/"
          }
        },


        {
           name: "New York City",
           lat: 40.7128, 
           lon: -74.0060,
           country: "United States",
           news: {
             name: "WPIX",
             site: "https://pix11.com/",
	     rss: "https://pix11.com/news/local-news/feed/"
           }
         },
	  
         {
           name: "San Francisco",
           lat: 37.7749, 
           lon: -122.4194,
           country: "United States",
           news: {
             name: "KPIX",
             site: "https://www.cbsnews.com/sanfrancisco/",
	     rss: "https://www.cbsnews.com/sanfrancisco/rss/"
           }
         },

         {
           name: "Washington, DC",
           lat: 38.9072, 
           lon: -77.0369,
           country: "United States",
           news: {
             name: "WUSA",
             site: "https://www.wusa9.com/",
	     rss: "https://www.wusa9.com/feeds/rss/local"
           }
         },

         {
           name: "Toronto",
           lat: 43.6532, 
           lon: -79.3832,
           country: "Canada",
           news: {
             name: "CP24",
             site: "https://www.cp24.com/",
	     rss: "https://www.cp24.com/rss/news"
           }
         },

         {
           name: "Mexico City",
           lat: 19.4326, 
           lon: -99.1332,
           country: "Mexico",
           news: {
             name: "N+ Televisa",
             site: "https://www.nmas.com.mx/ciudad-de-mexico/",
	     rss: "https://www.nmas.com.mx/rss/ciudad-de-mexico.xml"
           }
         },

         {
           name: "Havana",
           lat: 23.1136, 
           lon: -82.3666,
           country: "Cuba",
           news: {
             name: "Granma",
             site: "http://www.granma.cu/",
             rss: "http://www.granma.cu/rss"
           }
         },

         {
           name: "Buenos Aires",
           lat: -34.6037, 
           lon: -58.3816,
           country: "Argentina",
           news: {
             name: "Clarín",
             site: "https://www.clarin.com/",
             rss: "https://www.clarin.com/rss/lo-ultimo/"
           }
         },

         {
           name: "São Paulo",
           lat: -23.5505, 
           lon: -46.6333,
           country: "Brazil",
           news: {
             name: "G1",
             site: "https://g1.globo.com/sp/sao-paulo/",
             rss: "https://g1.globo.com/rss/g1/sp/sao-paulo/"
           }
         },

         {
           name: "Bogotá",
           lat: 4.7110, 
           lon: -74.0721,
           country: "Colombia",
           news: {
             name: "El Tiempo",
             site: "https://www.eltiempo.com/",
             rss: "https://www.eltiempo.com/rss/bogota.xml"
           }
         },

         {
           name: "Caracas",
           lat: 10.4806,
           lon: -66.9036,
           country: "Venezuela",
           news: {
             name: "El Universal",
             site: "https://www.eluniversal.com/",
             rss: "https://www.eluniversal.com/rss"
           }
         },

         {
           name: "Lima",
           lat: -12.0464,
           lon: -77.0428,
           country: "Peru",
           news: {
             name: "El Comercio",
             site: "https://elcomercio.pe/",
             rss: "https://elcomercio.pe/arc/outboundfeeds/rss/?outputType=xml"
           }
         },

         {
           name: "Santiago",
           lat: -33.4489,
           lon: -70.6693,
           country: "Chile",
           news: {
             name: "La Tercera",
             site: "https://www.latercera.com/",
             rss: "https://www.latercera.com/arc/outboundfeeds/rss/?outputType=xml"
           }
         },

         {
           name: "London",
           lat: 51.5074,
           lon: -0.1278,
           country: "United Kingdom",
           news: {
             name: "BBC",
             site: "https://www.bbc.com/news/england/london",
             rss: "https://feeds.bbci.co.uk/news/england/london/rss.xml"
           }
         },

         {
           name: "Paris",
           lat: 48.8566,
           lon: 2.3522,
           country: "France",
           news: {
             name: "France 24",
             site: "https://www.france24.com/en/france/",
             rss: "https://www.france24.com/en/france/rss"
           }
         },

         {
           name: "Berlin",
           lat: 52.5200,
           lon: 13.4050,
           country: "Germany",
           news: {
             name: "Deutsche Welle",
             site: "https://www.dw.com/en/germany/s-1432",
             rss: "https://rss.dw.com/rdf/rss-en-ger"
           }
         },

         {
           name: "Madrid",
           lat: 40.4168,
           lon: -3.7038,
           country: "Spain",
           news: {
             name: "El País",
             site: "https://elpais.com/espana/madrid/",
             rss: "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/madrid/portada"
           }
         },

         {
           name: "Barcelona",
           lat: 41.3851,
           lon: 2.1734,
           country: "Spain",
           news: {
             name: "La Vanguardia",
             site: "https://www.lavanguardia.com/local/barcelona",
             rss: "https://www.lavanguardia.com/rss/local/barcelona.xml"
           }
         },

         {
           name: "Rome",
           lat: 41.9028,
           lon: 12.4964,
           country: "Italy",
           news: {
             name: "ANSA",
             site: "https://www.ansa.it/english/",
             rss: "https://www.ansa.it/english/news/rss.xml"
           }
         },

         {
           name: "Warsaw",
           lat: 52.2297,
           lon: 21.0122,
           country: "Poland",
           news: {
             name: "Polskie Radio",
             site: "https://polskieradio.pl/395",
             rss: "https://polskieradio.pl/rss/395"
           }
         },

         {
           name: "Kyiv",
           lat: 50.4501,
           lon: 30.5234,
           country: "Ukraine",
           news: {
             name: "Ukrinform",
             site: "https://www.ukrinform.net/",
             rss: "https://www.ukrinform.net/rss"
           }
         },

         {
           name: "Brussels",
           lat: 50.8503,
           lon: 4.3517,
           country: "Belgium",
           news: {
             name: "RTBF",
             site: "https://www.rtbf.be/",
             rss: "https://rss.rtbf.be/article/rss/highlight_rtbf_info.xml"
           }
         },

         {
           name: "Zurich",
           lat: 47.3769,
           lon: 8.5417,
           country: "Switzerland",
           news: {
             name: "SRF",
             site: "https://www.srf.ch/news",
             rss: "https://www.srf.ch/news/bnf/rss/1646"
           }
         },

         {
           name: "Stockholm",
           lat: 59.3293,
           lon: 18.0686,
           country: "Sweden",
           news: {
             name: "SVT",
             site: "https://www.svt.se/nyheter/lokalt/stockholm/",
             rss: "https://www.svt.se/nyheter/lokalt/stockholm/rss.xml"
           }
         },

         {
           name: "Oslo",
           lat: 59.9139,
           lon: 10.7522,
           country: "Norway",
           news: {
             name: "NRK",
             site: "https://www.nrk.no/osloogviken/",
             rss: "https://www.nrk.no/osloogviken/rss"
           }
         },

         {
           name: "Copenhagen",
           lat: 55.6761,
           lon: 12.5683,
           country: "Denmark",
           news: {
             name: "DR",
             site: "https://www.dr.dk/nyheder",
             rss: "https://www.dr.dk/nyheder/service/feeds/senestenyt"
           }
         },

         {
           name: "Athens",
           lat: 37.9838,
           lon: 23.7275,
           country: "Greece",
           news: {
             name: "Kathimerini",
             site: "https://www.ekathimerini.com/",
             rss: "https://www.ekathimerini.com/rss/"
           }
         },

         {
           name: "Dublin",
           lat: 53.3498,
           lon: -6.2603,
           country: "Ireland",
           news: {
             name: "RTÉ",
             site: "https://www.rte.ie/news/dublin/",
             rss: "https://www.rte.ie/rss/news.xml"
           }
         },

         {
           name: "Amsterdam",
           lat: 52.3676,
           lon: 4.9041,
           country: "Netherlands",
           news: {
             name: "NOS",
             site: "https://nos.nl/",
             rss: "https://feeds.nos.nl/nosnieuwsalgemeen"
           }
         },

         {
           name: "Vatican City",
           lat: 41.9029,
           lon: 12.4534,
           country: "Vatican City",
           news: {
             name: "Vatican News",
             site: "https://www.vaticannews.va/en.html",
             rss: "https://www.vaticannews.va/en/rss.xml"
           }
         },

         {
           name: "Istanbul",
           lat: 41.0082,
           lon: 28.9784,
           country: "Turkey",
           news: {
             name: "Anadolu Agency",
             site: "https://www.aa.com.tr/en",
             rss: "https://www.aa.com.tr/en/rss/default?cat=guncel"
           }
         },

         {
           name: "Moscow",
           lat: 55.7558,
           lon: 37.6173,
           country: "Russia",
           news: {
             name: "TASS",
             site: "https://tass.com/",
             rss: "https://tass.com/rss/v2.xml"
           }
         },

         {
           name: "Jerusalem",
           lat: 31.7683,
           lon: 35.2137,
           country: "Israel",
           news: {
             name: "The Jerusalem Post",
             site: "https://www.jpost.com/",
             rss: "https://www.jpost.com/rss/rssfeedsheadlines.aspx"
           }
         },

         {
           name: "Gaza",
           lat: 31.5017,
           lon: 34.4668,
           country: "Palestine",
           news: {
             name: "WAFA",
             site: "https://english.wafa.ps/",
             rss: "https://english.wafa.ps/rss.aspx"
           }
         },

         {
           name: "Damascus",
           lat: 33.5138,
           lon: 36.2765,
           country: "Syria",
           news: {
             name: "SANA",
             site: "https://sana.sy/en/",
             rss: "https://sana.sy/en/?feed=rss2"
           }
         },

         {
           name: "Beirut",
           lat: 33.8938,
           lon: 35.5018,
           country: "Lebanon",
           news: {
             name: "The Daily Star",
             site: "https://www.dailystar.com.lb/",
             rss: "https://www.dailystar.com.lb/RSS.aspx"
           }
         },

         {
           name: "Baghdad",
           lat: 33.3152,
           lon: 44.3661,
           country: "Iraq",
           news: {
             name: "Iraqi News Agency",
             site: "https://ina.iq/eng/",
             rss: "https://ina.iq/eng/rss"
           }
         },

         {
           name: "Tripoli",
           lat: 32.8872,
           lon: 13.1913,
           country: "Libya",
           news: {
             name: "Libya Observer",
             site: "https://www.libyaobserver.ly/",
             rss: "https://www.libyaobserver.ly/rss.xml"
           }
         },

         {
           name: "Casablanca",
           lat: 33.5731,
           lon: -7.5898,
           country: "Morocco",
           news: {
             name: "Le Matin",
             site: "https://lematin.ma/",
             rss: "https://lematin.ma/rss"
           }
         },

         {
           name: "Algiers",
           lat: 36.7538,
           lon: 3.0588,
           country: "Algeria",
           news: {
             name: "Algerie Presse Service",
             site: "https://www.aps.dz/en",
             rss: "https://www.aps.dz/en/rss"
           }
         },

         {
           name: "Tunis",
           lat: 36.8065,
           lon: 10.1815,
           country: "Tunisia",
           news: {
             name: "Tunis Afrique Presse",
             site: "https://www.tap.info.tn/en",
             rss: "https://www.tap.info.tn/en/rss"
           }
         },

         {
           name: "Tehran",
           lat: 35.6892,
           lon: 51.3890,
           country: "Iran",
           news: {
             name: "IRNA",
             site: "https://en.irna.ir/",
             rss: "https://en.irna.ir/rss"
           }
         },

         {
           name: "Riyadh",
           lat: 24.7136,
           lon: 46.6753,
           country: "Saudi Arabia",
           news: {
             name: "Arab News",
             site: "https://www.arabnews.com/",
             rss: "https://www.arabnews.com/rss.xml"
           }
         },

         {
           name: "Dubai",
           lat: 25.2048,
           lon: 55.2708,
           country: "United Arab Emirates",
           news: {
             name: "Gulf News",
             site: "https://gulfnews.com/",
             rss: "https://gulfnews.com/rss"
           }
         },

         {
           name: "Geneva",
           lat: 46.2044,
           lon: 6.1432,
           country: "Switzerland",
           news: {
             name: "Swissinfo",
             site: "https://www.swissinfo.ch/eng",
             rss: "https://www.swissinfo.ch/eng/rss"
           }
         },

         {
           name: "Doha",
           lat: 25.2854,
           lon: 51.5310,
           country: "Qatar",
           news: {
             name: "Al Jazeera",
             site: "https://www.aljazeera.com/",
             rss: "https://www.aljazeera.com/xml/rss/all.xml"
           }
         },

         {
           name: "Singapore",
           lat: 1.3521,
           lon: 103.8198,
           country: "Singapore",
           news: {
             name: "Channel NewsAsia",
             site: "https://www.channelnewsasia.com/",
             rss: "https://www.channelnewsasia.com/rssfeeds/8395986"
           }
         },

         {
           name: "Hong Kong",
           lat: 22.3193,
           lon: 114.1694,
           country: "Hong Kong",
           news: {
             name: "South China Morning Post",
             site: "https://www.scmp.com/",
             rss: "https://www.scmp.com/rss/91/feed"
           }
         },

         {
           name: "Kabul",
           lat: 34.5553,
           lon: 69.2075,
           country: "Afghanistan",
           news: {
             name: "Khaama Press",
             site: "https://www.khaama.com/",
             rss: "https://www.khaama.com/feed/"
           }
         },

         {
           name: "Manama",
           lat: 26.2235,
           lon: 50.5876,
           country: "Bahrain",
           news: {
             name: "Bahrain News Agency",
             site: "https://www.bna.bh/en",
             rss: "https://www.bna.bh/en/rss"
           }
         },

         {
           name: "Kuwait City",
           lat: 29.3759,
           lon: 47.9774,
           country: "Kuwait",
           news: {
             name: "Kuwait News Agency",
             site: "https://www.kuna.net.kw/",
             rss: "https://www.kuna.net.kw/rss.aspx?Language=en"
           }
         },

         {
           name: "Tbilisi",
           lat: 41.7151,
           lon: 44.8271,
           country: "Georgia",
           news: {
             name: "Agenda.ge",
             site: "https://agenda.ge/",
             rss: "https://agenda.ge/en/rss"
           }
         },

         {
           name: "Yerevan",
           lat: 40.1792,
           lon: 44.4991,
           country: "Armenia",
           news: {
             name: "Armenpress",
             site: "https://armenpress.am/eng",
             rss: "https://armenpress.am/eng/rss"
           }
         },

         {
           name: "Baku",
           lat: 40.4093,
           lon: 49.8671,
           country: "Azerbaijan",
           news: {
             name: "AzerNews",
             site: "https://www.azernews.az/",
             rss: "https://www.azernews.az/rss"
           }
         },

         {
           name: "Sana'a",
           lat: 15.3694,
           lon: 44.1910,
           country: "Yemen",
           news: {
             name: "Saba News Agency",
             site: "https://www.sabanews.net/en",
             rss: "https://www.sabanews.net/en/rss"
           }
         },

         {
           name: "Cairo",
           lat: 30.0444,
           lon: 31.2357,
           country: "Egypt",
           news: {
             name: "Al Ahram",
             site: "https://english.ahram.org.eg/",
             rss: "https://english.ahram.org.eg/rss.aspx"
           }
         },

         {
           name: "Accra",
           lat: 5.6037,
           lon: -0.1870,
           country: "Ghana",
           news: {
             name: "Ghana News Agency",
             site: "https://gna.org.gh/",
             rss: "https://gna.org.gh/feed/"
           }
         },

         {
           name: "Lagos",
           lat: 6.5244,
           lon: 3.3792,
           country: "Nigeria",
           news: {
             name: "The Punch",
             site: "https://punchng.com/",
             rss: "https://punchng.com/feed/"
           }
         },

         {
           name: "Johannesburg",
           lat: -26.2041,
           lon: 28.0473,
           country: "South Africa",
           news: {
             name: "News24",
             site: "https://www.news24.com/",
             rss: "https://feeds.news24.com/articles/news24/TopStories/rss"
           }
         },

         {
           name: "Luanda",
           lat: -8.8390,
           lon: 13.2894,
           country: "Angola",
           news: {
             name: "ANGOP",
             site: "https://www.angop.ao/angola/en_us/index.html",
             rss: "https://www.angop.ao/rss/en_us/rss.xml"
           }
         },

         {
           name: "Kinshasa",
           lat: -4.4419,
           lon: 15.2663,
           country: "Democratic Republic of the Congo",
           news: {
             name: "Radio Okapi",
             site: "https://www.radiookapi.net/",
             rss: "https://www.radiookapi.net/rss.xml"
           }
         },

         {
           name: "Nairobi",
           lat: -1.2921,
           lon: 36.8219,
           country: "Kenya",
           news: {
             name: "Nation Africa",
             site: "https://nation.africa/",
             rss: "https://nation.africa/rss"
           }
         },

         {
           name: "Addis Ababa",
           lat: 9.0320,
           lon: 38.7469,
           country: "Ethiopia",
           news: {
             name: "Ethiopian News Agency",
             site: "https://www.ena.et/en/",
             rss: "https://www.ena.et/en/?feed=rss2"
           }
         },

         {
           name: "Khartoum",
           lat: 15.5007,
           lon: 32.5599,
           country: "Sudan",
           news: {
             name: "Sudan News Agency",
             site: "https://suna-sd.net/en",
             rss: "https://suna-sd.net/en/feed/"
           }
         },

        {
          name: "Natal",
          lat: -5.7945,
          lon: -35.2110,
          country: "Brazil",
          news: {
            name: "Tribuna do Norte",
            site: "https://tribunadonorte.com.br/",
            rss: "https://tribunadonorte.com.br/feed/"
          }
        },

        {
          name: "Maceió",
          lat: -9.6498,
          lon: -35.7089,
          country: "Brazil",
          news: {
            name: "Gazeta de Alagoas",
            site: "https://gazetadealagoas.com.br/",
            rss: "https://gazetadealagoas.com.br/rss"
          }
        },

        {
          name: "São Luís",
          lat: -2.5387,
          lon: -44.2825,
          country: "Brazil",
          news: {
            name: "O Imparcial",
            site: "https://oimparcial.com.br/",
            rss: "https://oimparcial.com.br/feed/"
          }
        },

        {
          name: "Manaus",
          lat: -3.1190,
          lon: -60.0217,
          country: "Brazil",
          news: {
            name: "A Crítica",
            site: "https://www.acritica.com/",
            rss: "https://www.acritica.com/rss"
          }
        },

        {
          name: "Belém",
          lat: -1.4558,
          lon: -48.5039,
          country: "Brazil",
          news: {
            name: "O Liberal",
            site: "https://www.oliberal.com/",
            rss: "https://www.oliberal.com/rss"
          }
        },

        {
          name: "Porto Velho",
          lat: -8.7619,
          lon: -63.9039,
          country: "Brazil",
          news: {
            name: "G1 Rondônia",
            site: "https://g1.globo.com/ro/rondonia/",
            rss: "https://g1.globo.com/rss/g1/ro/rondonia/"
          }
        },

        {
          name: "Comodoro Rivadavia",
          lat: -45.8641,
          lon: -67.4966,
          country: "Argentina",
          news: {
            name: "El Patagónico",
            site: "https://www.elpatagonico.com/",
            rss: "https://www.elpatagonico.com/rss"
          }
        },

        {
          name: "Buenos Aires",
          lat: -34.6037,
          lon: -58.3816,
          country: "Argentina",
          news: {
            name: "La Nación",
            site: "https://www.lanacion.com.ar/",
            rss: "https://www.lanacion.com.ar/rss/"
          }
        },

        {
          name: "Cali",
          lat: 3.4516,
          lon: -76.5320,
          country: "Colombia",
          news: {
            name: "El País Cali",
            site: "https://www.elpais.com.co/",
            rss: "https://www.elpais.com.co/rss.xml"
          }
        },

        {
          name: "Cancún",
          lat: 21.1619,
          lon: -86.8515,
          country: "Mexico",
          news: {
            name: "Novedades Quintana Roo",
            site: "https://sipse.com/novedades/",
            rss: "https://sipse.com/novedades/rss.xml"
          }
        },

        {
          name: "Veracruz",
          lat: 19.1738,
          lon: -96.1342,
          country: "Mexico",
          news: {
            name: "Diario de Xalapa",
            site: "https://www.diariodexalapa.com.mx/",
            rss: "https://www.diariodexalapa.com.mx/rss.xml"
          }
        },

        {
          name: "Acapulco",
          lat: 16.8531,
          lon: -99.8237,
          country: "Mexico",
          news: {
            name: "El Sur de Acapulco",
            site: "https://suracapulco.mx/",
            rss: "https://suracapulco.mx/feed/"
          }
        },

        {
          name: "Cayman Islands",
          lat: 19.2866,
          lon: -81.3744,
          country: "Cayman Islands",
          news: {
            name: "Cayman Compass",
            site: "https://www.caymancompass.com/",
            rss: "https://www.caymancompass.com/feed/"
          }
        },

        {
          name: "Barbados",
          lat: 13.0975,
          lon: -59.6167,
          country: "Barbados",
          news: {
            name: "Nation News",
            site: "https://www.nationnews.com/",
            rss: "https://www.nationnews.com/feed/"
          }
        },


         {
           name: "Delhi",
           lat: 28.6139,
           lon: 77.2090,
           country: "India",
           news: {
             name: "The Times of India",
             site: "https://timesofindia.indiatimes.com/city/delhi",
             rss: "https://timesofindia.indiatimes.com/rssfeeds/-2128839596.cms"
           }
         },

         {
           name: "Mumbai",
           lat: 19.0760,
           lon: 72.8777,
           country: "India",
           news: {
             name: "The Indian Express",
             site: "https://indianexpress.com/section/cities/mumbai/",
             rss: "https://indianexpress.com/section/cities/mumbai/feed/"
           }
         },

         {
           name: "Karachi",
           lat: 24.8607,
           lon: 67.0011,
           country: "Pakistan",
           news: {
             name: "Dawn",
             site: "https://www.dawn.com/",
             rss: "https://www.dawn.com/feeds/home"
           }
         },

         {
           name: "Dhaka",
           lat: 23.8103,
           lon: 90.4125,
           country: "Bangladesh",
           news: {
             name: "The Daily Star",
             site: "https://www.thedailystar.net/",
             rss: "https://www.thedailystar.net/rss.xml"
           }
         },

         {
           name: "Kathmandu",
           lat: 27.7172,
           lon: 85.3240,
           country: "Nepal",
           news: {
             name: "The Kathmandu Post",
             site: "https://kathmandupost.com/",
             rss: "https://kathmandupost.com/rss"
           }
         },

         {
           name: "Lhasa",
           lat: 29.6520,
           lon: 91.1721,
           country: "China",
           news: {
             name: "Xinhua News Agency",
             site: "https://english.news.cn/",
             rss: "https://english.news.cn/rss/worldrss.xml"
           }
         },

         {
           name: "Tokyo",
           lat: 35.6762,
           lon: 139.6503,
           country: "Japan",
           news: {
             name: "NHK",
             site: "https://www3.nhk.or.jp/nhkworld/en/news/",
             rss: "https://www3.nhk.or.jp/rss/news/cat0.xml"
           }
         },

         {
           name: "Seoul",
           lat: 37.5665,
           lon: 126.9780,
           country: "South Korea",
           news: {
             name: "Yonhap News Agency",
             site: "https://en.yna.co.kr/",
             rss: "https://en.yna.co.kr/RSS/news.xml"
           }
         },

         {
           name: "Shanghai",
           lat: 31.2304,
           lon: 121.4737,
           country: "China",
           news: {
             name: "Shanghai Daily",
             site: "https://www.shine.cn/",
             rss: "https://www.shine.cn/rss/"
           }
         },

         {
           name: "Beijing",
           lat: 39.9042,
           lon: 116.4074,
           country: "China",
           news: {
             name: "China Daily",
             site: "https://www.chinadaily.com.cn/",
             rss: "https://www.chinadaily.com.cn/rss.xml"
           }
         },

         {
           name: "Taipei",
           lat: 25.0330,
           lon: 121.5654,
           country: "Taiwan",
           news: {
             name: "Taipei Times",
             site: "https://www.taipeitimes.com/",
             rss: "https://www.taipeitimes.com/rss"
           }
         },

         {
           name: "Ho Chi Minh City",
           lat: 10.8231,
           lon: 106.6297,
           country: "Vietnam",
           news: {
             name: "VnExpress",
             site: "https://e.vnexpress.net/",
             rss: "https://e.vnexpress.net/rss/news.rss"
           }
         },

         {
           name: "Ulaanbaatar",
           lat: 47.8864,
           lon: 106.9057,
           country: "Mongolia",
           news: {
             name: "Montsame",
             site: "https://montsame.mn/en",
             rss: "https://montsame.mn/en/rss"
           }
         },

         {
           name: "Bangkok",
           lat: 13.7563,
           lon: 100.5018,
           country: "Thailand",
           news: {
             name: "Bangkok Post",
             site: "https://www.bangkokpost.com/",
             rss: "https://www.bangkokpost.com/rss/data/topstories.xml"
           }
         },

         {
           name: "Yangon",
           lat: 16.8409,
           lon: 96.1735,
           country: "Myanmar",
           news: {
             name: "The Irrawaddy",
             site: "https://www.irrawaddy.com/",
             rss: "https://www.irrawaddy.com/feed"
           }
         },

         {
           name: "Jakarta",
           lat: -6.2088,
           lon: 106.8456,
           country: "Indonesia",
           news: {
             name: "The Jakarta Post",
             site: "https://www.thejakartapost.com/",
             rss: "https://www.thejakartapost.com/rss"
           }
         },

         {
           name: "Manila",
           lat: 14.5995,
           lon: 120.9842,
           country: "Philippines",
           news: {
             name: "Philippine Daily Inquirer",
             site: "https://newsinfo.inquirer.net/",
             rss: "https://newsinfo.inquirer.net/feed"
           }
         },

         {
           name: "Sydney",
           lat: -33.8688,
           lon: 151.2093,
           country: "Australia",
           news: {
             name: "ABC News",
             site: "https://www.abc.net.au/news/nsw/",
             rss: "https://www.abc.net.au/news/feed/51120/rss.xml"
           }
         },

         {
           name: "Melbourne",
           lat: -37.8136,
           lon: 144.9631,
           country: "Australia",
           news: {
             name: "ABC News",
             site: "https://www.abc.net.au/news/vic/",
             rss: "https://www.abc.net.au/news/feed/107/rss.xml"
           }
         },

         {
           name: "Perth",
           lat: -31.9505,
           lon: 115.8605,
           country: "Australia",
           news: {
             name: "ABC News",
             site: "https://www.abc.net.au/news/wa/",
             rss: "https://www.abc.net.au/news/feed/110/rss.xml"
           }
         },

         {
           name: "Canberra",
           lat: -35.2809,
           lon: 149.1300,
           country: "Australia",
           news: {
             name: "ABC News",
             site: "https://www.abc.net.au/news/act/",
             rss: "https://www.abc.net.au/news/feed/486/rss.xml"
           }
         },

         {
           name: "Auckland",
           lat: -36.8509,
           lon: 174.7645,
           country: "New Zealand",
           news: {
             name: "RNZ",
             site: "https://www.rnz.co.nz/news/national",
             rss: "https://www.rnz.co.nz/rss/news/national.xml"
           }
         },

         {
           name: "Honolulu",
           lat: 21.3069,
           lon: -157.8583,
           country: "United States",
           news: {
             name: "Hawaii News Now",
             site: "https://www.hawaiinewsnow.com/",
             rss: "https://www.hawaiinewsnow.com/rss/"
           }
         },

         {
           name: "Seattle",
           lat: 47.6062,
           lon: -122.3321,
           country: "United States",
           news: {
             name: "KING 5 Seattle",
             site: "https://www.king5.com/",
             rss: "https://www.king5.com/rss"
           }
         },

         {
           name: "Atlanta",
           lat: 33.7490,
           lon: -84.3880,
           country: "United States",
           news: {
             name: "WSB-TV",
             site: "https://www.wsbtv.com/",
             rss: "https://www.wsbtv.com/rss/"
           }
         },

         {
           name: "Miami",
           lat: 25.7617,
           lon: -80.1918,
           country: "United States",
           news: {
             name: "WPLG",
             site: "https://www.local10.com/",
             rss: "https://www.local10.com/arc/outboundfeeds/rss/?outputType=xml"
           }
         },

         {
           name: "Chicago",
           lat: 41.8781,
           lon: -87.6298,
           country: "United States",
           news: {
             name: "WGN-TV",
             site: "https://wgntv.com/",
             rss: "https://wgntv.com/feed/"
           }
         },

         {
           name: "Montreal",
           lat: 45.5017,
           lon: -73.5673,
           country: "Canada",
           news: {
             name: "CBC Montreal",
             site: "https://www.cbc.ca/news/canada/montreal",
             rss: "https://www.cbc.ca/cmlink/rss-canada-montreal"
           }
         },

         {
           name: "Boston",
           lat: 42.3601,
           lon: -71.0589,
           country: "United States",
           news: {
             name: "WCVB-TV",
             site: "https://www.wcvb.com/",
             rss: "https://www.wcvb.com/topstories-rss"
           }
         },

         {
           name: "Philadelphia",
           lat: 39.9526,
           lon: -75.1652,
           country: "United States",
           news: {
             name: "WPVI-TV",
             site: "https://6abc.com/",
             rss: "https://6abc.com/feed/"
           }
         },

         {
           name: "Minneapolis",
           lat: 44.9778,
           lon: -93.2650,
           country: "United States",
           news: {
             name: "KARE 11",
             site: "https://www.kare11.com/",
             rss: "https://www.kare11.com/rss"
           }
         },

         {
           name: "Phoenix",
           lat: 33.4484,
           lon: -112.0740,
           country: "United States",
           news: {
             name: "KPNX",
             site: "https://www.12news.com/",
             rss: "https://www.12news.com/rss"
           }
         },

         {
           name: "Dallas",
           lat: 32.7767,
           lon: -96.7970,
           country: "United States",
           news: {
             name: "WFAA",
             site: "https://www.wfaa.com/",
             rss: "https://www.wfaa.com/rss"
           }
         },

         {
           name: "Houston",
           lat: 29.7604,
           lon: -95.3698,
           country: "United States",
           news: {
             name: "KPRC-TV",
             site: "https://www.click2houston.com/",
             rss: "https://www.click2houston.com/arc/outboundfeeds/rss/?outputType=xml"
           }
         },

         {
           name: "Denver",
           lat: 39.7392,
           lon: -104.9903,
           country: "United States",
           news: {
             name: "KUSA",
             site: "https://www.9news.com/",
             rss: "https://www.9news.com/rss"
           }
         },

         {
           name: "Portland",
           lat: 45.5152,
           lon: -122.6784,
           country: "United States",
           news: {
             name: "KATU",
             site: "https://katu.com/",
             rss: "https://katu.com/rss"
           }
         },

         {
           name: "Las Vegas",
           lat: 36.1699,
           lon: -115.1398,
           country: "United States",
           news: {
             name: "KTNV",
             site: "https://www.ktnv.com/",
             rss: "https://www.ktnv.com/rss"
           }
         },

         {
           name: "Salt Lake City",
           lat: 40.7608,
           lon: -111.8910,
           country: "United States",
           news: {
             name: "KSL-TV",
             site: "https://ksltv.com/",
             rss: "https://ksltv.com/feed/"
           }
         },

         {
           name: "Vienna",
           lat: 48.2082,
           lon: 16.3738,
           country: "Austria",
           news: {
             name: "ORF",
             site: "https://orf.at/",
             rss: "https://rss.orf.at/news.xml"
           }
         },

         {
           name: "Belgrade",
           lat: 44.7866,
           lon: 20.4489,
           country: "Serbia",
           news: {
             name: "RTS",
             site: "https://www.rts.rs/page/stories/en.html",
             rss: "https://www.rts.rs/page/stories/en/rss.xml"
           }
         },

         {
           name: "Muscat",
           lat: 23.5880,
           lon: 58.3829,
           country: "Oman",
           news: {
             name: "Oman News Agency",
             site: "https://omannews.gov.om/",
             rss: "https://omannews.gov.om/rss/en.xml"
           }
         },

         {
           name: "The Hague",
           lat: 52.0705,
           lon: 4.3007,
           country: "Netherlands",
           news: {
             name: "NOS",
             site: "https://nos.nl/",
             rss: "https://feeds.nos.nl/nosnieuwsalgemeen"
           }
         },

         {
           name: "Phnom Penh",
           lat: 11.5564,
           lon: 104.9282,
           country: "Cambodia",
           news: {
             name: "The Phnom Penh Post",
             site: "https://www.phnompenhpost.com/",
             rss: "https://www.phnompenhpost.com/rss.xml"
           }
         },

         {
           name: "Jeddah",
           lat: 21.4858,
           lon: 39.1925,
           country: "Saudi Arabia",
           news: {
             name: "Saudi Press Agency",
             site: "https://www.spa.gov.sa/en",
             rss: "https://www.spa.gov.sa/rss.xml"
           }
         },

         {
           name: "Astana",
           lat: 51.1694,
           lon: 71.4491,
           country: "Kazakhstan",
           news: {
             name: "Kazinform",
             site: "https://www.inform.kz/en",
             rss: "https://www.inform.kz/en/rss"
           }
         },

         {
           name: "Tel Aviv",
           lat: 32.0853,
           lon: 34.7818,
           country: "Israel",
           news: {
             name: "The Times of Israel",
             site: "https://www.timesofisrael.com/",
             rss: "https://www.timesofisrael.com/feed/"
           }
         },

         {
           name: "Minsk",
           lat: 53.9006,
           lon: 27.5590,
           country: "Belarus",
           news: {
             name: "BelTA",
             site: "https://eng.belta.by/",
             rss: "https://eng.belta.by/rss"
           }
         },

         {
           name: "Anchorage",
           lat: 61.2181,
           lon: -149.9003,
           country: "United States",
           news: {
             name: "KTUU",
             site: "https://www.alaskasnewssource.com/",
             rss: "https://www.alaskasnewssource.com/rss/"
           }
         },

         {
           name: "Suva",
           lat: -18.1248,
           lon: 178.4501,
           country: "Fiji",
           news: {
             name: "Fiji Broadcasting Corporation",
             site: "https://www.fbcnews.com.fj/",
             rss: "https://www.fbcnews.com.fj/feed/"
           }
         },

         {
           name: "Georgetown",
           lat: 6.8013,
           lon: -58.1551,
           country: "Guyana",
           news: {
             name: "Stabroek News",
             site: "https://www.stabroeknews.com/",
             rss: "https://www.stabroeknews.com/feed/"
           }
         },

         {
           name: "Ankara",
           lat: 39.9334,
           lon: 32.8597,
           country: "Turkey",
           news: {
             name: "Anadolu Agency",
             site: "https://www.aa.com.tr/en",
             rss: "https://www.aa.com.tr/en/rss/default?cat=guncel"
           }
         },

         {
           name: "El Paso",
           lat: 31.7619,
           lon: -106.4850,
           country: "United States",
           news: {
             name: "KVIA-TV",
             site: "https://kvia.com/",
             rss: "https://kvia.com/feed/"
           }
         },

         {
           name: "Quito",
           lat: -0.1807,
           lon: -78.4678,
           country: "Ecuador",
           news: {
             name: "El Comercio",
             site: "https://www.elcomercio.com/",
             rss: "https://www.elcomercio.com/feed/"
           }
         },

         {
           name: "San Diego",
           lat: 32.7157,
           lon: -117.1611,
           country: "United States",
           news: {
             name: "KFMB-TV",
             site: "https://www.cbs8.com/",
             rss: "https://www.cbs8.com/rss"
           }
         },

         {
           name: "Albuquerque",
           lat: 35.0844,
           lon: -106.6504,
           country: "United States",
           news: {
             name: "KOAT-TV",
             site: "https://www.koat.com/",
             rss: "https://www.koat.com/topstories-rss"
           }
         },

         {
           name: "Vancouver",
           lat: 49.2827,
           lon: -123.1207,
           country: "Canada",
           news: {
             name: "CBC Vancouver",
             site: "https://www.cbc.ca/news/canada/british-columbia",
             rss: "https://www.cbc.ca/cmlink/rss-canada-britishcolumbia"
           }
         },

         {
           name: "Yekaterinburg",
           lat: 56.8389,
           lon: 60.6057,
           country: "Russia",
           news: {
             name: "Ura.ru",
             site: "https://ura.news/",
             rss: "https://ura.news/rss"
           }
         },

         {
           name: "Krasnodar",
           lat: 45.0355,
           lon: 38.9753,
           country: "Russia",
           news: {
             name: "Yugopolis",
             site: "https://www.yugopolis.ru/",
             rss: "https://www.yugopolis.ru/rss"
           }
         },

         {
           name: "Volgograd",
           lat: 48.7080,
           lon: 44.5133,
           country: "Russia",
           news: {
             name: "V1.ru",
             site: "https://v1.ru/",
             rss: "https://v1.ru/rss"
           }
         },

         {
           name: "Chelyabinsk",
           lat: 55.1644,
           lon: 61.4368,
           country: "Russia",
           news: {
             name: "74.ru",
             site: "https://74.ru/",
             rss: "https://74.ru/rss"
           }
         },

         {
           name: "Rostov-on-Don",
           lat: 47.2357,
           lon: 39.7015,
           country: "Russia",
           news: {
             name: "161.ru",
             site: "https://161.ru/",
             rss: "https://161.ru/rss"
           }
         },

         {
           name: "Novosibirsk",
           lat: 55.0084,
           lon: 82.9357,
           country: "Russia",
           news: {
             name: "NGS.ru",
             site: "https://ngs.ru/",
             rss: "https://ngs.ru/rss"
           }
         },

         {
           name: "Samara",
           lat: 53.1959,
           lon: 50.1002,
           country: "Russia",
           news: {
             name: "63.ru",
             site: "https://63.ru/",
             rss: "https://63.ru/rss"
           }
         },


         {
           name: "Charlotte",
           lat: 35.2271,
           lon: -80.8431,
           country: "United States",
           news: {
             name: "WBTV",
             site: "https://www.wbtv.com/",
             rss: "https://www.wbtv.com/rss/"
           }
         },

         {
           name: "New Orleans",
           lat: 29.9511,
           lon: -90.0715,
           country: "United States",
           news: {
             name: "WWL-TV",
             site: "https://www.wwltv.com/",
             rss: "https://www.wwltv.com/rss"
           }
         },

         {
           name: "St. Louis",
           lat: 38.6270,
           lon: -90.1994,
           country: "United States",
           news: {
             name: "KSDK",
             site: "https://www.ksdk.com/",
             rss: "https://www.ksdk.com/rss"
           }
         },

         {
           name: "Calgary",
           lat: 51.0447,
           lon: -114.0719,
           country: "Canada",
           news: {
             name: "CBC Calgary",
             site: "https://www.cbc.ca/news/canada/calgary",
             rss: "https://www.cbc.ca/cmlink/rss-canada-calgary"
           }
         },

         {
           name: "Nuuk",
           lat: 64.1835,
           lon: -51.7216,
           country: "Greenland",
           news: {
             name: "Kalaallit Nunaata Radioa",
             site: "https://knr.gl/en",
             rss: "https://knr.gl/en/rss"
           }
         },

         {
           name: "Reykjavik",
           lat: 64.1466,
           lon: -21.9426,
           country: "Iceland",
           news: {
             name: "RÚV",
             site: "https://www.ruv.is/english",
             rss: "https://www.ruv.is/rss/english"
           }
         },

         {
           name: "Niamey",
           lat: 13.5116,
           lon: 2.1254,
           country: "Niger",
           news: {
             name: "Agence Nigérienne de Presse",
             site: "https://www.anp.ne/",
             rss: "https://www.anp.ne/feed/"
           }
         },

         {
           name: "Kigali",
           lat: -1.9441,
           lon: 30.0619,
           country: "Rwanda",
           news: {
             name: "The New Times",
             site: "https://www.newtimes.co.rw/",
             rss: "https://www.newtimes.co.rw/rss"
           }
         },

         {
           name: "Kampala",
           lat: 0.3476,
           lon: 32.5825,
           country: "Uganda",
           news: {
             name: "New Vision",
             site: "https://www.newvision.co.ug/",
             rss: "https://www.newvision.co.ug/rss"
           }
         },

         {
           name: "Djibouti",
           lat: 11.5721,
           lon: 43.1456,
           country: "Djibouti",
           news: {
             name: "Agence Djiboutienne d'Information",
             site: "https://www.adi.dj/",
             rss: "https://www.adi.dj/rss"
           }
         },

         {
           name: "Mogadishu",
           lat: 2.0469,
           lon: 45.3182,
           country: "Somalia",
           news: {
             name: "SONNA",
             site: "https://sonna.so/en/",
             rss: "https://sonna.so/en/feed/"
           }
         },

         {
           name: "Edinburgh",
           lat: 55.9533,
           lon: -3.1883,
           country: "United Kingdom",
           news: {
             name: "BBC Scotland",
             site: "https://www.bbc.com/news/scotland",
             rss: "https://feeds.bbci.co.uk/news/scotland/rss.xml"
           }
         },

         {
           name: "Cardiff",
           lat: 51.4816,
           lon: -3.1791,
           country: "United Kingdom",
           news: {
             name: "BBC Wales",
             site: "https://www.bbc.com/news/wales",
             rss: "https://feeds.bbci.co.uk/news/wales/rss.xml"
           }
         },

         {
           name: "Tallinn",
           lat: 59.4370,
           lon: 24.7536,
           country: "Estonia",
           news: {
             name: "ERR",
             site: "https://news.err.ee/",
             rss: "https://news.err.ee/rss"
           }
         },

         {
           name: "Vilnius",
           lat: 54.6872,
           lon: 25.2797,
           country: "Lithuania",
           news: {
             name: "LRT",
             site: "https://www.lrt.lt/en",
             rss: "https://www.lrt.lt/en/rss"
           }
         },

         {
           name: "Riga",
           lat: 56.9496,
           lon: 24.1052,
           country: "Latvia",
           news: {
             name: "LSM",
             site: "https://eng.lsm.lv/",
             rss: "https://eng.lsm.lv/rss/"
           }
         },

         {
           name: "Kherson",
           lat: 46.6354,
           lon: 32.6169,
           country: "Ukraine",
           news: {
             name: "Ukrinform",
             site: "https://www.ukrinform.net/",
             rss: "https://www.ukrinform.net/rss"
           }
         },

         {
           name: "Bucharest",
           lat: 44.4268,
           lon: 26.1025,
           country: "Romania",
           news: {
             name: "Agerpres",
             site: "https://www.agerpres.ro/english",
             rss: "https://www.agerpres.ro/english/rss"
           }
         },

         {
           name: "Nicosia",
           lat: 35.1856,
           lon: 33.3823,
           country: "Cyprus",
           news: {
             name: "Cyprus News Agency",
             site: "https://www.cna.org.cy/en",
             rss: "https://www.cna.org.cy/rss"
           }
         },

         {
           name: "Sofia",
           lat: 42.6977,
           lon: 23.3219,
           country: "Bulgaria",
           news: {
             name: "Bulgarian News Agency",
             site: "https://www.bta.bg/en",
             rss: "https://www.bta.bg/en/rss"
           }
         },

         {
           name: "Tirana",
           lat: 41.3275,
           lon: 19.8187,
           country: "Albania",
           news: {
             name: "Albanian Telegraphic Agency",
             site: "https://ata.gov.al/en/",
             rss: "https://ata.gov.al/en/feed/"
           }
         },

         {
           name: "Sarajevo",
           lat: 43.8563,
           lon: 18.4131,
           country: "Bosnia and Herzegovina",
           news: {
             name: "FENA",
             site: "https://www.fena.ba/",
             rss: "https://www.fena.ba/rss"
           }
         },

         {
           name: "Panama City",
           lat: 8.9824,
           lon: -79.5199,
           country: "Panama",
           news: {
             name: "La Prensa",
             site: "https://www.prensa.com/",
             rss: "https://www.prensa.com/rss/"
           }
         },

         {
           name: "Guatemala City",
           lat: 14.6349,
           lon: -90.5069,
           country: "Guatemala",
           news: {
             name: "Prensa Libre",
             site: "https://www.prensalibre.com/",
             rss: "https://www.prensalibre.com/rss/"
           }
         },

         {
           name: "San Salvador",
           lat: 13.6929,
           lon: -89.2182,
           country: "El Salvador",
           news: {
             name: "El Diario de Hoy",
             site: "https://www.elsalvador.com/",
             rss: "https://www.elsalvador.com/rss/"
           }
         },

         {
           name: "Tegucigalpa",
           lat: 14.0723,
           lon: -87.1921,
           country: "Honduras",
           news: {
             name: "La Prensa",
             site: "https://www.laprensa.hn/",
             rss: "https://www.laprensa.hn/rss/"
           }
         },

         {
           name: "Managua",
           lat: 12.1364,
           lon: -86.2514,
           country: "Nicaragua",
           news: {
             name: "La Prensa",
             site: "https://www.laprensa.com.ni/",
             rss: "https://www.laprensa.com.ni/rss/"
           }
         },

         {
           name: "Monaco",
           lat: 43.7384,
           lon: 7.4246,
           country: "Monaco",
           news: {
             name: "Monaco Matin",
             site: "https://www.monacomatin.mc/",
             rss: "https://www.monacomatin.mc/rss"
           }
         },

         {
           name: "Luxembourg City",
           lat: 49.6117,
           lon: 6.1319,
           country: "Luxembourg",
           news: {
             name: "Luxemburger Wort",
             site: "https://www.wort.lu/en",
             rss: "https://www.wort.lu/en/rss"
           }
         },

         {
           name: "Liechtenstein",
           lat: 47.1416,
           lon: 9.5215,
           country: "Liechtenstein",
           news: {
             name: "Liechtensteinischer Vaterland",
             site: "https://www.vaterland.li/",
             rss: "https://www.vaterland.li/rss"
           }
         },

         {
           name: "Birmingham",
           lat: 52.4862,
           lon: -1.8904,
           country: "United Kingdom",
           news: {
             name: "Birmingham Mail",
             site: "https://www.birminghammail.co.uk/",
             rss: "https://www.birminghammail.co.uk/rss"
           }
         },

         {
           name: "Catania",
           lat: 37.5079,
           lon: 15.0830,
           country: "Italy",
           news: {
             name: "La Sicilia",
             site: "https://www.lasicilia.it/",
             rss: "https://www.lasicilia.it/rss/"
           }
         },

         {
           name: "Bilbao",
           lat: 43.2630,
           lon: -2.9350,
           country: "Spain",
           news: {
             name: "El Correo",
             site: "https://www.elcorreo.com/",
             rss: "https://www.elcorreo.com/rss"
           }
         },

         {
           name: "La Paz",
           lat: -16.5000,
           lon: -68.1500,
           country: "Bolivia",
           news: {
             name: "La Razón",
             site: "https://www.la-razon.com/",
             rss: "https://www.la-razon.com/rss"
           }
         },

         {
           name: "Brest",
           lat: 48.3904,
           lon: -4.4861,
           country: "France",
           news: {
             name: "Ouest-France",
             site: "https://www.ouest-france.fr/",
             rss: "https://www.ouest-france.fr/rss.xml"
           }
         },

         {
           name: "Nantes",
           lat: 47.2184,
           lon: -1.5536,
           country: "France",
           news: {
             name: "Ouest-France",
             site: "https://www.ouest-france.fr/",
             rss: "https://www.ouest-france.fr/rss.xml"
           }
         },

         {
           name: "Frankfurt",
           lat: 50.1109,
           lon: 8.6821,
           country: "Germany",
           news: {
             name: "Deutsche Welle",
             site: "https://www.dw.com/en/top-stories/s-9097",
             rss: "https://rss.dw.com/xml/rss-en-all"
           }
         },

         {
           name: "Munich",
           lat: 48.1351,
           lon: 11.5820,
           country: "Germany",
           news: {
             name: "Süddeutsche Zeitung",
             site: "https://www.sueddeutsche.de/",
             rss: "https://www.sueddeutsche.de/rss"
           }
         },

         {
           name: "Milan",
           lat: 45.4642,
           lon: 9.1900,
           country: "Italy",
           news: {
             name: "Corriere della Sera",
             site: "https://www.corriere.it/",
             rss: "https://www.corriere.it/rss/homepage.xml"
           }
         },

         {
           name: "Naples",
           lat: 40.8518,
           lon: 14.2681,
           country: "Italy",
           news: {
             name: "Il Mattino",
             site: "https://www.ilmattino.it/",
             rss: "https://www.ilmattino.it/rss"
           }
         },

         {
           name: "Lyon",
           lat: 45.7640,
           lon: 4.8357,
           country: "France",
           news: {
             name: "Le Progrès",
             site: "https://www.leprogres.fr/",
             rss: "https://www.leprogres.fr/rss.xml"
           }
         },

         {
           name: "Venice",
           lat: 45.4408,
           lon: 12.3155,
           country: "Italy",
           news: {
             name: "La Nuova Venezia",
             site: "https://nuovavenezia.gelocal.it/",
             rss: "https://nuovavenezia.gelocal.it/rss.xml"
           }
         },

         {
           name: "Marseille",
           lat: 43.2965,
           lon: 5.3698,
           country: "France",
           news: {
             name: "La Provence",
             site: "https://www.laprovence.com/",
             rss: "https://www.laprovence.com/rss.xml"
           }
         },

         {
           name: "Antarctica",
           lat: -82.8628,
           lon: 135.0000,
           country: "Antarctica",
           news: {
             name: "Antarctic Treaty Secretariat / Scientific News",
             site: "https://www.ats.aq/",
             rss: "https://www.ats.aq/rss"  
           }
         },

         {
           name: "Barrow",
           lat: 71.2906,
           lon: -156.7886,
           country: "United States",
           news: {
             name: "Alaska Public Media",
             site: "https://www.alaskapublic.org/",
             rss: "https://www.alaskapublic.org/rss/"
           }
         },

         {
           name: "Guam",
           lat: 13.4750,
           lon: 144.7500,
           country: "United States",
           news: {
             name: "Pacific Daily News",
             site: "https://www.guampdn.com/",
             rss: "https://www.guampdn.com/rss/"
           }
         },

         {
           name: "Colombo",
           lat: 6.9271,
           lon: 79.8612,
           country: "Sri Lanka",
           news: {
             name: "Daily News Sri Lanka",
             site: "https://www.dailynews.lk/",
             rss: "https://www.dailynews.lk/feed"
           }
         },         

         {
           name: "Helsinki",
           lat: 60.1699,
           lon: 24.9384,
           country: "Finland",
           news: {
             name: "Yle",
             site: "https://yle.fi/uutiset/osasto/news/",
             rss: "https://feeds.yle.fi/uutiset/v1/recent.rss?publisherIds=YLE_UUTISET"
           }
         },

         {
           name: "Apia",
           lat: -13.8507,
           lon: -171.7514,
           country: "Samoa",
           news: {
             name: "Samoa Observer",
             site: "https://www.samoaobserver.ws/",
             rss: "https://www.samoaobserver.ws/rss"
           }
         },

         {
           name: "Maui",
           lat: 20.7984,
           lon: -156.3319,
           country: "United States",
           news: {
             name: "Maui Now",
             site: "https://mauinow.com/",
             rss: "https://mauinow.com/feed/"
           }
         },

         {
           name: "Juneau",
           lat: 58.3019,
           lon: -134.4197,
           country: "United States",
           news: {
             name: "Juneau Empire",
             site: "https://www.juneauempire.com/",
             rss: "https://www.juneauempire.com/feed/"
           }
         },

         {
           name: "Fairbanks",
           lat: 64.8378,
           lon: -147.7164,
           country: "United States",
           news: {
             name: "Fairbanks Daily News-Miner",
             site: "https://www.newsminer.com/",
             rss: "https://www.newsminer.com/search/?f=rss"
           }
         },

         {
           name: "Kodiak",
           lat: 57.7900,
           lon: -152.4072,
           country: "United States",
           news: {
             name: "Kodiak Daily Mirror",
             site: "https://www.kodiakdailymirror.com/",
             rss: "https://www.kodiakdailymirror.com/feed/"
           }
         },

         {
           name: "Edmonton",
           lat: 53.5461,
           lon: -113.4938,
           country: "Canada",
           news: {
             name: "Edmonton Journal",
             site: "https://edmontonjournal.com/",
             rss: "https://edmontonjournal.com/feed/"
           }
         },

         {
           name: "Saskatoon",
           lat: 52.1579,
           lon: -106.6702,
           country: "Canada",
           news: {
             name: "Saskatoon StarPhoenix",
             site: "https://thestarphoenix.com/",
             rss: "https://thestarphoenix.com/feed/"
           }
         },

         {
           name: "Regina",
           lat: 50.4452,
           lon: -104.6189,
           country: "Canada",
           news: {
             name: "Regina Leader-Post",
             site: "https://leaderpost.com/",
             rss: "https://leaderpost.com/feed/"
           }
         },

         {
           name: "Yellowknife",
           lat: 62.4540,
           lon: -114.3718,
           country: "Canada",
           news: {
             name: "Northern News Services",
             site: "https://www.nnsl.com/yellowknifer/",
             rss: "https://www.nnsl.com/yellowknifer/feed/"
           }
         },

         {
           name: "Boise",
           lat: 43.6150,
           lon: -116.2023,
           country: "United States",
           news: {
             name: "Idaho Statesman",
             site: "https://www.idahostatesman.com/",
             rss: "https://www.idahostatesman.com/latest-news/?outputType=xml"
           }
         },

         {
           name: "Missoula",
           lat: 46.8721,
           lon: -113.9940,
           country: "United States",
           news: {
             name: "Missoulian",
             site: "https://missoulian.com/",
             rss: "https://missoulian.com/search/?f=rss"
           }
         },

         {
           name: "Billings",
           lat: 45.7833,
           lon: -108.5007,
           country: "United States",
           news: {
             name: "Billings Gazette",
             site: "https://billingsgazette.com/",
             rss: "https://billingsgazette.com/search/?f=rss"
           }
         },

         {
           name: "Cheyenne",
           lat: 41.1400,
           lon: -104.8202,
           country: "United States",
           news: {
             name: "Wyoming Tribune Eagle",
             site: "https://www.wyomingnews.com/",
             rss: "https://www.wyomingnews.com/search/?f=rss"
           }
         },

         {
           name: "Sioux Falls",
           lat: 43.5446,
           lon: -96.7311,
           country: "United States",
           news: {
             name: "Argus Leader",
             site: "https://www.argusleader.com/",
             rss: "https://www.argusleader.com/rss/"
           }
         },

         {
           name: "Charleston",
           lat: 38.3498,
           lon: -81.6326,
           country: "United States",
           news: {
             name: "Charleston Gazette-Mail",
             site: "https://www.wvgazettemail.com/",
             rss: "https://www.wvgazettemail.com/search/?f=rss"
           }
         },

         {
           name: "Tampa",
           lat: 27.9506,
           lon: -82.4572,
           country: "United States",
           news: {
             name: "Tampa Bay Times",
             site: "https://www.tampabay.com/",
             rss: "https://www.tampabay.com/rss/"
           }
         },

         {
           name: "Avalon",
           lat: 33.3428,
           lon: -118.3278,
           country: "United States",
           news: {
             name: "The Catalina Islander",
             site: "https://thecatalinaislander.com/",
             rss: "https://thecatalinaislander.com/feed/"
           }
         },

         {
           name: "Omaha",
           lat: 41.2565,
           lon: -95.9345,
           country: "United States",
           news: {
             name: "Omaha World-Herald",
             site: "https://omaha.com/",
             rss: "https://omaha.com/search/?f=rss"
           }
         },

         {
           name: "Santa Fe",
           lat: 35.6870,
           lon: -105.9378,
           country: "United States",
           news: {
             name: "Santa Fe New Mexican",
             site: "https://www.santafenewmexican.com/",
             rss: "https://www.santafenewmexican.com/search/?f=rss"
           }
         },

         {
           name: "Amarillo",
           lat: 35.2219,
           lon: -101.8313,
           country: "United States",
           news: {
             name: "Amarillo Globe-News",
             site: "https://www.amarillo.com/",
             rss: "https://www.amarillo.com/rss/"
           }
         },

         {
           name: "Chihuahua",
           lat: 28.6353,
           lon: -106.0889,
           country: "Mexico",
           news: {
             name: "El Diario de Chihuahua",
             site: "https://www.eldiariodechihuahua.mx/",
             rss: "https://www.eldiariodechihuahua.mx/rss"
           }
         },

         {
           name: "Hermosillo",
           lat: 29.0729,
           lon: -110.9559,
           country: "Mexico",
           news: {
             name: "El Imparcial",
             site: "https://www.elimparcial.com/",
             rss: "https://www.elimparcial.com/rss"
           }
         },

         {
           name: "Almaty",
           lat: 43.2220,
           lon: 76.8512,
           country: "Kazakhstan",
           news: {
             name: "The Astana Times",
             site: "https://astanatimes.com/",
             rss: "https://astanatimes.com/feed/"
           }
         },

         {
           name: "Tashkent",
           lat: 41.2995,
           lon: 69.2401,
           country: "Uzbekistan",
           news: {
             name: "UzDaily",
             site: "https://www.uzdaily.uz/",
             rss: "https://www.uzdaily.uz/en/rss"
           }
         },
   
         {
           name: "Bishkek",
           lat: 42.8746,
           lon: 74.5698,
           country: "Kyrgyzstan",
           news: {
             name: "24.kg",
             site: "https://24.kg/english/",
             rss: "https://24.kg/rss/english/"
           }
         },
     
         {
           name: "Jeju",
           lat: 33.4996,
           lon: 126.5312,
           country: "South Korea",
           news: {
             name: "Jeju Weekly",
             site: "http://www.jejuweekly.com/",
             rss: "http://www.jejuweekly.com/rss/"
           }
         },
         
         {
           name: "Haikou",
           lat: 20.0440,
           lon: 110.1999,
           country: "China",
           news: {
             name: "Hainan Daily",
             site: "http://www.hndaily.cn/",
             rss: "http://www.hndaily.cn/rss.xml"
           }
         },

         {
           name: "Darwin",
           lat: -12.4634,
           lon: 130.8456,
           country: "Australia",
           news: {
             name: "NT News",
             site: "https://www.ntnews.com.au/",
             rss: "https://www.ntnews.com.au/rss"
           }
         },

         {
           name: "Dushanbe",
           lat: 38.5598,
           lon: 68.7870,
           country: "Tajikistan",
           news: {
             name: "Asia-Plus",
             site: "https://asiaplustj.info/en",
             rss: "https://asiaplustj.info/en/rss"
           }
         },

         {
           name: "Vladivostok",
           lat: 43.1155,
           lon: 131.8855,
           country: "Russia",
           news: {
             name: "VladNews",
             site: "https://vladnews.ru/",
             rss: "https://vladnews.ru/rss"
           }
         },


         {
           name: "Mauritius",
           lat: -20.1609,
           lon: 57.5012,
           country: "Mauritius",
           news: {
             name: "L'Express Mauritius",
             site: "https://lexpress.mu/",
             rss: "https://lexpress.mu/rss.xml"
           }
         },

         {
           name: "Comoros",
           lat: -11.7172,
           lon: 43.2473,
           country: "Comoros",
           news: {
             name: "Al-Watwan",
             site: "http://alwatwan.net/",
             rss: "http://alwatwan.net/feed/"
           }
         },

         {
           name: "Seychelles",
           lat: -4.6191,
           lon: 55.4513,
           country: "Seychelles",
           news: {
             name: "Seychelles Nation",
             site: "https://www.nation.sc/",
             rss: "https://www.nation.sc/feed/"
           }
         },


         {
           name: "Hilo",
           lat: 19.7297,
           lon: -155.0900,
           country: "United States",
           news: {
             name: "Hawaii Tribune-Herald",
             site: "https://www.hawaiitribune-herald.com/",
             rss: "https://www.hawaiitribune-herald.com/rss/"
           }
         },

         {
           name: "Sapporo",
           lat: 43.0618,
           lon: 141.3545,
           country: "Japan",
           news: {
             name: "Japan Times",
             site: "https://www.japantimes.co.jp/",
             rss: "https://www.japantimes.co.jp/feed/"
           }
         },

         {
           name: "Valletta",
           lat: 35.8997,
           lon: 14.5146,
           country: "Malta",
           news: {
             name: "Times of Malta",
             site: "https://www.timesofmalta.com/",
             rss: "https://www.timesofmalta.com/rss"
           }
         },

         {
           name: "Fortaleza",
           lat: -3.7319,
           lon: -38.5267,
           country: "Brazil",
           news: {
             name: "Diário do Nordeste",
             site: "https://diariodonordeste.verdesmares.com.br/",
             rss: "https://diariodonordeste.verdesmares.com.br/rss"
           }
         },

         {
           name: "Hanoi",
           lat: 21.0278,
           lon: 105.8342,
           country: "Vietnam",
           news: {
             name: "Vietnam News",
             site: "https://vietnamnews.vn/",
             rss: "https://vietnamnews.vn/rss"
           }
         },

         {
           name: "Chongqing",
           lat: 29.4316,
           lon: 106.9123,
           country: "China",
           news: {
             name: "Chongqing Daily",
             site: "http://cqrbepaper.cqnews.net/",
             rss: "http://cqrbepaper.cqnews.net/rss"
           }
         },

         {
           name: "Salvador",
           lat: -12.9777,
           lon: -38.5016,
           country: "Brazil",
           news: {
             name: "Correio",
             site: "https://www.correio24horas.com.br/",
             rss: "https://www.correio24horas.com.br/rss"
           }
         },

         {
           name: "Recife",
           lat: -8.0476,
           lon: -34.8770,
           country: "Brazil",
           news: {
             name: "Diario de Pernambuco",
             site: "https://www.diariodepernambuco.com.br/",
             rss: "https://www.diariodepernambuco.com.br/rss"
           }
         },

         {
           name: "Belo Horizonte",
           lat: -19.9167,
           lon: -43.9345,
           country: "Brazil",
           news: {
             name: "Estado de Minas",
             site: "https://www.em.com.br/",
             rss: "https://www.em.com.br/rss"
           }
         },

         {
           name: "Whitehorse",
           lat: 60.7212,
           lon: -135.0568,
           country: "Canada",
           news: {
             name: "Yukon News",
             site: "https://www.yukon-news.com/",
             rss: "https://www.yukon-news.com/feed/"
           }
         },

         {
           name: "Iqaluit",
           lat: 63.7467,
           lon: -68.5167,
           country: "Canada",
           news: {
             name: "Nunatsiaq News",
             site: "https://nunatsiaq.com/",
             rss: "https://nunatsiaq.com/feed/"
           }
         },

         {
           name: "Winnipeg",
           lat: 49.8951,
           lon: -97.1384,
           country: "Canada",
           news: {
             name: "Winnipeg Free Press",
             site: "https://www.winnipegfreepress.com/",
             rss: "https://www.winnipegfreepress.com/rss/"
           }
         },

         {
           name: "St. John's",
           lat: 47.5615,
           lon: -52.7126,
           country: "Canada",
           news: {
             name: "The Telegram",
             site: "https://www.thetelegram.com/",
             rss: "https://www.thetelegram.com/rss/"
           }
         },

         {
           name: "Jacksonville",
           lat: 30.3322,
           lon: -81.6557,
           country: "United States",
           news: {
             name: "The Florida Times-Union",
             site: "https://www.jacksonville.com/",
             rss: "https://www.jacksonville.com/rss/"
           }
         },

         {
           name: "Jackson Hole",
           lat: 43.4799,
           lon: -110.7624,
           country: "United States",
           news: {
             name: "Jackson Hole News & Guide",
             site: "https://www.jhnewsandguide.com/",
             rss: "https://www.jhnewsandguide.com/rss/"
           }
         },

         {
           name: "Spokane",
           lat: 47.6588,
           lon: -117.4260,
           country: "United States",
           news: {
             name: "The Spokesman-Review",
             site: "https://www.spokesman.com/",
             rss: "https://www.spokesman.com/feeds/rss/"
           }
         },

         {
           name: "Busan",
           lat: 35.1796,
           lon: 129.0756,
           country: "South Korea",
           news: {
             name: "The Korea Times",
             site: "https://www.koreatimes.co.kr/",
             rss: "https://www.koreatimes.co.kr/www/rss/rss.xml"
           }
         },

         {
           name: "Pittsburgh",
           lat: 40.4406,
           lon: -79.9959,
           country: "United States",
           news: {
             name: "Pittsburgh Post-Gazette",
             site: "https://www.post-gazette.com/",
             rss: "https://www.post-gazette.com/rss/"
           }
         },

         {
           name: "Duluth",
           lat: 46.7867,
           lon: -92.1005,
           country: "United States",
           news: {
             name: "Duluth News Tribune",
             site: "https://www.duluthnewstribune.com/",
             rss: "https://www.duluthnewstribune.com/rss/"
           }
         },

         {
           name: "Madison",
           lat: 43.0731,
           lon: -89.4012,
           country: "United States",
           news: {
             name: "Wisconsin State Journal",
             site: "https://madison.com/",
             rss: "https://madison.com/rss/"
           }
         },

         {
           name: "Milwaukee",
           lat: 43.0389,
           lon: -87.9065,
           country: "United States",
           news: {
             name: "Milwaukee Journal Sentinel",
             site: "https://www.jsonline.com/",
             rss: "https://www.jsonline.com/rss/"
           }
         },

         {
           name: "Rapid City",
           lat: 44.0805,
           lon: -103.2310,
           country: "United States",
           news: {
             name: "Rapid City Journal",
             site: "https://rapidcityjournal.com/",
             rss: "https://rapidcityjournal.com/rss/"
           }
         },

         {
           name: "Nashville",
           lat: 36.1627,
           lon: -86.7816,
           country: "United States",
           news: {
             name: "The Tennessean",
             site: "https://www.tennessean.com/",
             rss: "https://www.tennessean.com/rss/"
           }
         },

         {
           name: "Des Moines",
           lat: 41.5868,
           lon: -93.6250,
           country: "United States",
           news: {
             name: "Des Moines Register",
             site: "https://www.desmoinesregister.com/",
             rss: "https://www.desmoinesregister.com/rss/"
           }
         },

         {
           name: "Little Rock",
           lat: 34.7465,
           lon: -92.2896,
           country: "United States",
           news: {
             name: "Arkansas Democrat-Gazette",
             site: "https://www.arkansasonline.com/",
             rss: "https://www.arkansasonline.com/rss/"
           }
         },

         {
           name: "Bismarck",
           lat: 46.8083,
           lon: -100.7837,
           country: "United States",
           news: {
             name: "The Bismarck Tribune",
             site: "https://bismarcktribune.com/",
             rss: "https://bismarcktribune.com/rss/"
           }
         },

         {
           name: "San Antonio",
           lat: 29.4241,
           lon: -98.4936,
           country: "United States",
           news: {
             name: "San Antonio Express-News",
             site: "https://www.expressnews.com/",
             rss: "https://www.expressnews.com/rss/"
           }
         },

         {
           name: "Tucson",
           lat: 32.2226,
           lon: -110.9747,
           country: "United States",
           news: {
             name: "Arizona Daily Star",
             site: "https://tucson.com/",
             rss: "https://tucson.com/rss/"
           }
         },

         {
           name: "Paramaribo",
           lat: 5.8520,
           lon: -55.2038,
           country: "Suriname",
           news: {
             name: "De Ware Tijd",
             site: "https://www.dwtonline.com/",
             rss: "https://www.dwtonline.com/feed/"
           }
         },

         {
           name: "Santo Domingo",
           lat: 18.4861,
           lon: -69.9312,
           country: "Dominican Republic",
           news: {
             name: "Listín Diario",
             site: "https://listindiario.com/",
             rss: "https://listindiario.com/rss"
           }
         },

         {
           name: "Kingston",
           lat: 17.9712,
           lon: -76.7936,
           country: "Jamaica",
           news: {
             name: "The Jamaica Gleaner",
             site: "https://jamaica-gleaner.com/",
             rss: "https://jamaica-gleaner.com/rss.xml"
           }
         },
 
         {
           name: "Antofagasta",
           lat: -23.6509,
           lon: -70.3975,
           country: "Chile",
           news: {
             name: "El Mercurio de Antofagasta",
             site: "https://www.soychile.cl/Antofagasta/",
             rss: "https://www.soychile.cl/Antofagasta/rss/"
           }
         },

         {
           name: "Brisbane",
           lat: -27.4698,
           lon: 153.0251,
           country: "Australia",
           news: {
             name: "The Courier-Mail",
             site: "https://www.couriermail.com.au/",
             rss: "https://www.couriermail.com.au/rss"
           }
         },

         {
           name: "Adelaide",
           lat: -34.9285,
           lon: 138.6007,
           country: "Australia",
           news: {
             name: "The Advertiser",
             site: "https://www.adelaidenow.com.au/",
             rss: "https://www.adelaidenow.com.au/rss"
           }
         },
 
         {
           name: "Cairns",
           lat: -16.9186,
           lon: 145.7781,
           country: "Australia",
           news: {
             name: "The Cairns Post",
             site: "https://www.cairnspost.com.au/",
             rss: "https://www.cairnspost.com.au/rss"
           }
         },
 
         {
           name: "Alice Springs",
           lat: -23.6980,
           lon: 133.8807,
           country: "Australia",
           news: {
             name: "Alice Springs News",
             site: "https://alicespringsnews.com.au/",
             rss: "https://alicespringsnews.com.au/feed/"
           }
         },
         

         {
           name: "Sacramento",
           lat: 38.5816,
           lon: -121.4944,
           country: "United States",
           news: {
             name: "Sacramento Bee",
             site: "https://www.sacbee.com/",
             rss: "https://www.sacbee.com/rss/"
           }
         },

         {
           name: "Reno",
           lat: 39.5296,
           lon: -119.8138,
           country: "United States",
           news: {
             name: "Reno Gazette Journal",
             site: "https://www.rgj.com/",
             rss: "https://www.rgj.com/rss/"
           }
         },

         {
           name: "San Juan",
           lat: 18.4655,
           lon: -66.1057,
           country: "Puerto Rico",
           news: {
             name: "El Nuevo Día",
             site: "https://www.elnuevodia.com/",
             rss: "https://www.elnuevodia.com/rss/"
           }
         },

         {
           name: "Detroit",
           lat: 42.3314,
           lon: -83.0458,
           country: "United States",
           news: {
             name: "Detroit Free Press",
             site: "https://www.freep.com/",
             rss: "https://www.freep.com/rss/"
           }
         },

         {
           name: "Zagreb",
           lat: 45.8150,
           lon: 15.9785,
           country: "Croatia",
           news: {
             name: "HINA",
             site: "https://www.hina.hr/",
             rss: "https://www.hina.hr/rss"
           }
         },

         {
           name: "Tijuana",
           lat: 32.5149,
           lon: -117.0382,
           country: "Mexico",
           news: {
             name: "El Mexicano",
             site: "https://www.el-mexicano.com.mx/",
             rss: "https://www.el-mexicano.com.mx/rss"
           }
         },

         {
           name: "Monterrey",
           lat: 25.6866,
           lon: -100.3161,
           country: "Mexico",
           news: {
             name: "El Norte",
             site: "https://www.elnorte.com/",
             rss: "https://www.elnorte.com/rss"
           }
         },

         {
           name: "Culiacán",
           lat: 24.8091,
           lon: -107.3940,
           country: "Mexico",
           news: {
             name: "Noroeste",
             site: "https://www.noroeste.com.mx/",
             rss: "https://www.noroeste.com.mx/rss"
           }
         },


         {
           name: "Bermuda",
           lat: 32.3078,
           lon: -64.7505,
           country: "Bermuda",
           news: {
             name: "The Royal Gazette",
             site: "https://www.royalgazette.com/",
             rss: "https://www.royalgazette.com/rss/"
           }
         },

         {
           name: "Port Moresby",
           lat: -9.4438,
           lon: 147.1803,
           country: "Papua New Guinea",
           news: {
             name: "Post-Courier",
             site: "https://www.postcourier.com.pg/",
             rss: "https://www.postcourier.com.pg/feed/"
           }
         },

         {
           name: "Malé",
           lat: 4.1755,
           lon: 73.5093,
           country: "Maldives",
           news: {
             name: "The Edition",
             site: "https://edition.mv/",
             rss: "https://edition.mv/rss/"
           }
         },

         {
           name: "Falkland Islands",
           lat: -51.6977,
           lon: -57.8517,
           country: "Falkland Islands",
           news: {
             name: "Penguin News",
             site: "https://www.penguin-news.com/",
             rss: "https://www.penguin-news.com/rss/"
           }
         },

         {
           name: "Faroe Islands",
           lat: 62.0076,
           lon: -6.7906,
           country: "Faroe Islands",
           news: {
             name: "In.fo",
             site: "https://www.in.fo/",
             rss: "https://www.in.fo/rss/"
           }
         },

         {
           name: "Vientiane",
           lat: 17.9757,
           lon: 102.6331,
           country: "Laos",
           news: {
             name: "Vientiane Times",
             site: "https://www.vientianetimes.org.la/",
             rss: "https://www.vientianetimes.org.la/rss"
           }
         },

         {
           name: "Trondheim",
           lat: 63.4305,
           lon: 10.3951,
           country: "Norway",
           news: {
             name: "Adresseavisen",
             site: "https://www.adressa.no/",
             rss: "https://www.adressa.no/rss/"
           }
         },

         {
           name: "Bergen",
           lat: 60.3913,
           lon: 5.3221,
           country: "Norway",
           news: {
             name: "Bergens Tidende",
             site: "https://www.bt.no/",
             rss: "https://www.bt.no/rss/"
           }
         },

         {
           name: "Bora Bora",
           lat: -16.5004,
           lon: -151.7415,
           country: "French Polynesia",
           news: {
             name: "Tahiti Infos",
             site: "https://www.tahiti-infos.com/",
             rss: "https://www.tahiti-infos.com/rss"
           }
         },

         {
           name: "Tonga",
           lat: -21.1394,
           lon: -175.2045,
           country: "Tonga",
           news: {
             name: "Matangi Tonga",
             site: "https://matangitonga.to/",
             rss: "https://matangitonga.to/rss"
           }
         },

         {
           name: "Vanuatu",
           lat: -17.7333,
           lon: 168.3167,
           country: "Vanuatu",
           news: {
             name: "Vanuatu Daily Post",
             site: "https://dailypost.vu/",
             rss: "https://dailypost.vu/rss"
           }
         },

         {
           name: "Ushuaia",
           lat: -54.8019,
           lon: -68.3030,
           country: "Argentina",
           news: {
             name: "El Diario del Fin del Mundo",
             site: "https://www.eldiariodelfindelmundo.com/",
             rss: "https://www.eldiariodelfindelmundo.com/rss"
           }
         },

         {
           name: "Aruba",
           lat: 12.5211,
           lon: -70.0419,
           country: "Aruba",
           news: {
             name: "Aruba Today",
             site: "https://www.arubatoday.com/",
             rss: "https://www.arubatoday.com/rss"
           }
         },

         {
           name: "Gibraltar",
           lat: 36.1408,
           lon: -5.3536,
           country: "Gibraltar",
           news: {
             name: "Gibraltar Chronicle",
             site: "https://www.chronicle.gi/",
             rss: "https://www.chronicle.gi/rss"
           }
         },

         {
           name: "Toulouse",
           lat: 43.6047,
           lon: 1.4442,
           country: "France",
           news: {
             name: "La Dépêche du Midi",
             site: "https://www.ladepeche.fr/",
             rss: "https://www.ladepeche.fr/rss"
           }
         },

         {
           name: "Pago Pago",
           lat: -14.2756,
           lon: -170.7020,
           country: "American Samoa",
           news: {
             name: "Samoa News",
             site: "https://www.samoanews.com/",
             rss: "https://www.samoanews.com/rss"
           }
         },

         {
           name: "Okinawa",
           lat: 26.2124,
           lon: 127.6809,
           country: "Japan",
           news: {
             name: "Ryukyu Shimpo",
             site: "https://www.ryukyushimpo.jp/",
             rss: "https://www.ryukyushimpo.jp/rss"
           }
         },

         {
           name: "Bali",
           lat: -8.6500,
           lon: 115.2167,
           country: "Indonesia",
           news: {
             name: "Bali Post",
             site: "https://www.balipost.com/",
             rss: "https://www.balipost.com/rss"
           }
         },

         {
           name: "Wellington",
           lat: -41.2865,
           lon: 174.7762,
           country: "New Zealand",
           news: {
             name: "The Dominion Post",
             site: "https://www.stuff.co.nz/dominion-post",
             rss: "https://www.stuff.co.nz/dominion-post/rss"
           }
         },

         {
           name: "Phuket",
           lat: 7.8804,
           lon: 98.3923,
           country: "Thailand",
           news: {
             name: "The Phuket News",
             site: "https://www.thephuketnews.com/",
             rss: "https://www.thephuketnews.com/rss"
           }
         },

         {
           name: "Chennai",
           lat: 13.0827,
           lon: 80.2707,
           country: "India",
           news: {
             name: "The Hindu",
             site: "https://www.thehindu.com/",
             rss: "https://www.thehindu.com/rss/"
           }
         },

         {
           name: "Hyderabad",
           lat: 17.3850,
           lon: 78.4867,
           country: "India",
           news: {
             name: "The Hans India",
             site: "https://www.thehansindia.com/",
             rss: "https://www.thehansindia.com/rss"
           }
         },

         {
           name: "Hanga Roa",
           lat: -27.1617,
           lon: -109.4455,
           country: "Chile (Easter Island)",
           news: {
             name: "El Mercurio Isla de Pascua",
             site: "https://www.elmercurio.com/",
             rss: "https://www.elmercurio.com/rss"
           }
         },



         {
           name: "Mérida",
           lat: 20.9674,
           lon: -89.5926,
           country: "Mexico",
           news: {
             name: "Por Esto!",
             site: "https://www.poresto.net/",
             rss: "https://www.poresto.net/rss"
           }
         },

         {
           name: "Guadalajara",
           lat: 20.6597,
           lon: -103.3496,
           country: "Mexico",
           news: {
             name: "El Occidental",
             site: "https://www.eloccidental.com.mx/",
             rss: "https://www.eloccidental.com.mx/rss"
           }
         },

         {
           name: "Rio de Janeiro",
           lat: -22.9068,
           lon: -43.1729,
           country: "Brazil",
           news: {
             name: "O Globo",
             site: "https://oglobo.globo.com/",
             rss: "https://oglobo.globo.com/rss.xml"
           }
         }

      ]; 


      // City points
      const citySize = 0.0375;
      const ringBurstDelay = 0.18;
      const ringSpeed = 0.008; 
      const positions = [];
      const ringMultiplierMax = 8;
      const ringStartRadius = 0.005;
      const ringThickness = 0.0001;
      const ringOuterMultiplier = 8;
      const listElement = document.getElementById("list");
      cities.forEach(city=>{
        const {name,lat,lon,country}=city;
        const phi=(90-lat)*(Math.PI/180);
        const theta=(lon+180)*(Math.PI/180);
        const x=-radius*Math.sin(phi)*Math.cos(theta);
        const z= radius*Math.sin(phi)*Math.sin(theta);
        const y= radius*Math.cos(phi);
        positions.push(x,y,z);
        const li=document.createElement("li");
        li.textContent = (country && name !== country)
          ? `${name}, ${country}`
          : name;
        listElement.appendChild(li);
      });

      const cityGeo=new THREE.BufferGeometry();
      cityGeo.setAttribute("position", new THREE.Float32BufferAttribute(positions,3));

      function createGlowTexture(){
        const size=128;
        const glowCanvas=document.createElement("canvas");
        glowCanvas.width=size; glowCanvas.height=size;
        const ctx=glowCanvas.getContext("2d");
        const outerRadius = size * 0.15;
        const grad=ctx.createRadialGradient(size/2,size/2,0,size/2,size/2,size/2);
        grad.addColorStop(0,"rgba(255,200,120,1)");
        grad.addColorStop(0.4,"rgba(255,140,40,0.7)");
        grad.addColorStop(0.8,"rgba(255,80,20,0.3)");
        grad.addColorStop(1,"rgba(255,80,20,0)");
        ctx.fillStyle=grad; ctx.fillRect(0,0,size,size);
        return new THREE.CanvasTexture(glowCanvas);
      }

      const glowTexture=createGlowTexture();
      const cityMat=new THREE.PointsMaterial({
        size:citySize,
        sizeAttenuation: true,
        map:glowTexture,
        transparent:true,
        blending:THREE.AdditiveBlending,
        depthWrite:false
      });
      const cityPoints=new THREE.Points(cityGeo,cityMat);
      scene.add(cityPoints);

            // ===============================
      // Selection Ring Burst
      // ===============================


      const ringGroup = new THREE.Group();
      scene.add(ringGroup);

      const ringCount = 3;
      const ringMeshes = [];
      const ringStates = [];

      for (let i = 0; i < ringCount; i++) {

        const ringGeo = new THREE.RingGeometry(
          ringStartRadius,
          ringStartRadius + ringThickness * ringOuterMultiplier,
          64
        );


        const ringMat = new THREE.MeshBasicMaterial({
          color: new THREE.Color(1.0, 0.6, 0.25),
          transparent: true,
          opacity: 0,
          side: THREE.DoubleSide,
          depthWrite: false,
          blending: THREE.NormalBlending
        });


        const ring = new THREE.Mesh(ringGeo, ringMat);


        ringGroup.add(ring);
        ringMeshes.push(ring);

        ringStates.push({
          progress: 0,
          delay: i * ringBurstDelay,
          active: false
        });
      }
     

      /* >>>>> INSERTED: GEO BOUNDARY LOADER START */

      const boundaryLayer = new GeoBoundaryLayer(scene, radius);

      fetch("custom.geo.json")
        .then(res => res.json())
        .then(data => {
          boundaryLayer.loadGeoJSON(data);
        });

      // ------------------------------
      // Utility: check if city is facing the camera
      // ------------------------------

      function isCityVisible(pointPos, camera) {
 
        const pointVector = pointPos.clone().normalize();


        const cameraDir = new THREE.Vector3();
        camera.getWorldDirection(cameraDir).normalize();

        const dot = cameraDir.dot(pointVector);
        return dot < 0;
      }


      function updateCityGlow() {

        const cameraDir = new THREE.Vector3();
        camera.getWorldDirection(cameraDir).normalize();

        const positionsAttr = cityPoints.geometry.attributes.position;
        const count = positionsAttr.count;

        if (!cityPoints.geometry.attributes.color) {
          const colors = new Float32Array(count * 3);
          cityPoints.geometry.setAttribute(
            "color",
            new THREE.BufferAttribute(colors, 3)
          );
          cityMat.vertexColors = true;
        }

        const colors = cityPoints.geometry.attributes.color;

        for (let i = 0; i < count; i++) {

          const cityPos = new THREE.Vector3();
          cityPos.fromBufferAttribute(positionsAttr, i);
          cityPos.applyMatrix4(cityPoints.matrixWorld);
          cityPos.normalize();

          let dot = -cameraDir.dot(cityPos);
          let normalized = (dot + 1) / 2;
          const minGlow = 0.15;
          let glow = minGlow + (1 - minGlow) * Math.pow(normalized, 2.5);

          if (glowPulseActive && i === selectedCityIndex) {
            const pulse = 1 + 0.4 * Math.sin(glowPulseTime * Math.PI);
            glow *= pulse;
          }  


          colors.setXYZ(
            i,
            glow,
            glow * 0.6,
            glow * 0.25
          );
        }

        colors.needsUpdate = true;
      }



      const cityLabelsContainer = document.getElementById("cityLabels");
      const cityLabels = cities.map(city => {

        const div = document.createElement("div");

        div.innerHTML = `
          <div class="bubbleWrapper">

            <svg class="bubbleOutline">
              <rect class="bubbleRect"
                    x="0"
                    y="0"
                    rx="12"
                    ry="12"
                    width="100%"
                    height="100%" />
            </svg>

            <div class="bubbleContent">
              <div class="bubbleTitle">${city.name}</div>
              <div class="bubbleMeta">
                <span class="storyCount">0 stories</span>
              </div>
            </div>

          </div>
        `;


        div.className = "cityBubble";
        div.style.position = "absolute";
        div.style.pointerEvents = "none";
        div.style.opacity = 0;
        div.style.transition = "opacity 0.2s";

        cityLabelsContainer.appendChild(div);

        return div;
      });


      const hoverMouse = new THREE.Vector2();
      let hoveredIndex = null;
      let selectedCityIndex = null;
      let isFocused = false;
      let hoveredCityPosition = null;
      let timeInterval = null;
      const compassSVG = document.querySelector(".compass-svg");



      let glowPulseTime = 0;
      let glowPulseActive = false;

      const compassRing = document.querySelector(".compass-svg");
      const compass = document.getElementById("compass");
      compass.addEventListener("click", () => {

        const currentX = scene.rotation.x;

        const targetEuler = new THREE.Euler(currentX, 0, 0);
        targetQuaternion = new THREE.Quaternion().setFromEuler(targetEuler);

       isFocused = false;

      });

      window.addEventListener("mousemove", (event) => {
          hoverMouse.x = (event.clientX / window.innerWidth) * 2 - 1;
          hoverMouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
      });

      function updateHoverLabels() {

        raycaster.setFromCamera(hoverMouse, camera);
        const intersects = raycaster.intersectObject(cityPoints);

        hoveredIndex = null;
        hoveredCityPosition = null;

        const infoPanel = document.getElementById("infoPanel");
        const panelOpen = infoPanel.classList.contains("active");


        if (intersects.length > 0) {

          const index = intersects[0].index;

          if (panelOpen && index === selectedCityIndex) {
            return;
          }

          const cityPos = new THREE.Vector3();
          cityPos.fromBufferAttribute(
            cityPoints.geometry.attributes.position,
            index
          );
          cityPos.applyMatrix4(cityPoints.matrixWorld);

          if (isCityVisible(cityPos, camera)) {
            hoveredIndex = index;
            hoveredCityPosition = cityPos.clone();
          }
        }

          
        

        cities.forEach((city, i) => {

          const label = cityLabels[i];

          const pos = new THREE.Vector3(
            positions[i * 3],
            positions[i * 3 + 1],
            positions[i * 3 + 2]
          );

          pos.applyMatrix4(cityPoints.matrixWorld);

          const projected = pos.clone().project(camera);
          const x = (projected.x + 1) / 2 * window.innerWidth;
          const y = (-projected.y + 1) / 2 * window.innerHeight;

          label.style.left = `${x}px`;
          label.style.top  = `${y}px`;

          const isHovered  = (i === hoveredIndex);
          const isSelected = (i === selectedCityIndex);
          const shouldShow =
            (isHovered) ||
            (!panelOpen && isSelected);


          if (isSelected) {
            label.classList.add("focused");
          } else {
            label.classList.remove("focused");
          }

          if (isHovered) {
            label.classList.add("hovered");
          } else {
            label.classList.remove("hovered");
          }

          if (shouldShow) {

            const storyCountEl = label.querySelector(".storyCount");

            if (storyCountEl) {
              storyCountEl.textContent = `${city.storyCount || 0} stories`;
            }

            label.style.opacity = 1;
            label.style.transform = "translate(-50%, -160%) scale(1)";

            if (isHovered || isSelected) {
              triggerBubbleTyping(i);
            }            

          } else {

            label.style.opacity = 0;
            label.style.transform = "translate(-50%, -140%) scale(0.95)";
            const title = label.querySelector(".bubbleTitle");
            if (title) {
              title.dataset.typed = "false";
            }

          }

        });

      }

            // ------------------------------
      // Bubble Perimeter Trace
      // ------------------------------

      function triggerBubbleTrace(index, onComplete) {

        const bubble = cityLabels[index];
        if (!bubble) return;

        const content = bubble.querySelector(".bubbleContent");
        if (!content) return;

        content.classList.remove("trace");
        void content.offsetWidth; // restart animation
        content.classList.add("trace");

        // wait for animation to finish (~0.5s)
        setTimeout(() => {

          if (onComplete) {
            onComplete();
          }

        }, 500);

      }

      

            // ------------------------------
      // Bubble Typing Animation
      // ------------------------------

      function triggerBubbleTyping(index) {

        const bubble = cityLabels[index];
        if (!bubble) return;

        const title = bubble.querySelector(".bubbleTitle");
        if (!title) return;

        if (title.dataset.typed === "true") return;

        const fullText = cities[index].name;

        title.textContent = "";
        title.dataset.typed = "true";
        title.classList.add("typing");

        let charIndex = 0;
        const typingSpeed = 45; // ms per character (~0.4–0.6s total)

        function type() {

          if (charIndex < fullText.length) {

            title.textContent += fullText.charAt(charIndex);
            charIndex++;
            setTimeout(type, typingSpeed);

          } else {

            title.classList.remove("typing");

          }

        }

        type();

      }



      // ------------------------------
      // Electric Bubble Timer
      // ------------------------------

      function triggerElectricPulse() {

        cityLabels.forEach(label => {

          if (label.style.opacity === "1") {

            label.classList.remove("electric");
            void label.offsetWidth;
            label.classList.add("electric");

          }

        });

      }


      setInterval(() => {

        triggerElectricPulse();

      }, 3000);




      // Raycaster for city clicks

      const raycaster=new THREE.Raycaster();
      raycaster.params.Points.threshold=0.02;
      const mouse=new THREE.Vector2();

      window.addEventListener("click",event=>{
        mouse.x=(event.clientX/window.innerWidth)*2-1;
        mouse.y=-(event.clientY/window.innerHeight)*2+1;
        raycaster.setFromCamera(mouse,camera);
        const intersects=raycaster.intersectObject(cityPoints);
        if(intersects.length>0){
          const index=intersects[0].index;
          const cityPos = new THREE.Vector3();
          cityPos.fromBufferAttribute(cityPoints.geometry.attributes.position, index);
          cityPos.applyMatrix4(cityPoints.matrixWorld);
        
          if (isCityVisible(cityPos, camera)) {

            selectedCityIndex = index;
            isFocused = true;

            focusCity(cities[index]);
            openCityPanel(cities[index]);

          } else {
            console.log("City is on the far side, cannot select.");
          }
        }
      });

/* ===============================
   iOS TOUCH CITY SELECTION
=============================== */

      window.addEventListener("touchstart", (event) => { 
        if (event.touches.length !== 1) return;

        const touch = event.touches[0];

        mouse.x = (touch.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(touch.clientY / window.innerHeight) * 2 + 1;

        raycaster.setFromCamera(mouse, camera);

        const intersects = raycaster.intersectObject(cityPoints);

        if (intersects.length > 0) {
          const index = intersects[0].index;  
          const cityPos = new THREE.Vector3();

          cityPos.fromBufferAttribute(
            cityPoints.geometry.attributes.position,
            index
          );

          cityPos.applyMatrix4(cityPoints.matrixWorld);

          if (isCityVisible(cityPos, camera)) {

            selectedCityIndex = index;
            isFocused = true;

            focusCity(cities[index]);
            openCityPanel(cities[index]);

          }
        }
      }, { passive: true });

            // ------------------------------
      // Leader Line Helpers
      // ------------------------------

      // ------------------------------
      // Leader Line Helpers
      // ------------------------------

      function updateHoverLine(x, y) {

        const line = document.getElementById("hoverLine");
        if (!line) return;

        if (hoveredIndex === null) {
          line.style.opacity = "0";
          return;
        }

        const bubble = cityLabels[hoveredIndex];
        if (!bubble) return;

        const rect = bubble.getBoundingClientRect();

        const bubbleX = rect.left + rect.width / 2;
        const bubbleY = rect.bottom;

        line.setAttribute("x1", x);
        line.setAttribute("y1", y);
        line.setAttribute("x2", bubbleX);
        line.setAttribute("y2", bubbleY);

        line.style.opacity = "0.6";
      }

      function hideHoverLine() {

        const line = document.getElementById("hoverLine");
        if (line) {
          line.style.opacity = "0";
        }

      }


        

      function openCityPanel(city){
        const panel = document.getElementById("infoPanel");

        const showCountry =
          city.country &&
          city.name.toLowerCase() !== city.country.toLowerCase();

        panel.innerHTML = `
          <button class="closePanel">✕</button>
          <h2>${city.name}</h2>
          ${showCountry ? `<h3>${city.country}</h3>` : ""}

          <p id="localTime" style="margin-top:8px;font-size:14px;opacity:0.85;"></p>

          <p>News Source: <a href="${city.news.site}" target="_blank">${city.news.name}</a></p>
          <p>RSS Feed: <a href="${city.news.rss}" target="_blank">${city.news.rss}</a></p>
        `;


        panel.classList.add("active");

        setTimeout(() => {
          targetZoom = 1.7;  // slightly closer than focusCity zoom
        }, 250);

    
        const timeElement = document.getElementById("localTime");

        

        function updateLocalTime() {

          const nowUTC = new Date();

          // longitude → hours offset (15° per hour)
          const offsetHours = city.lon / 15;

          const localTime = new Date(
            nowUTC.getTime() + offsetHours * 60 * 60 * 1000
          );

          const formatted = localTime.toLocaleTimeString([], {
            hour: "2-digit",
            minute: "2-digit",
            second: "2-digit"
          });

          timeElement.textContent = `Local Time: ${formatted}`;
        }

        updateLocalTime();
        if (timeInterval) clearInterval(timeInterval);
          timeInterval = setInterval(updateLocalTime, 1000);


        const closeBtn = panel.querySelector(".closePanel");
        closeBtn.addEventListener("click", () => {
          panel.classList.remove("active");
          clearInterval(timeInterval);
          timeInterval = null;
        });
      }


      window.addEventListener("keydown",(e)=>{
        if(e.key==="Escape") {
          document.getElementById("infoPanel").classList.remove("active");
          clearInterval(timeInterval);
          timeInterval = null;
        }  
      });

      // Drag rotation
      let dragging=false, prevX=0, prevY=0;
      window.addEventListener("mousedown",e=>{
        dragging=true; 
        prevX=e.clientX; 
        prevY=e.clientY;
        selectedCityIndex = null;
        isFocused = false; 
      });
      window.addEventListener("mouseup",()=>dragging=false);
      window.addEventListener("mousemove",e=>{
        if(!dragging) return;
        scene.rotation.y += (e.clientX-prevX)*0.005;
        scene.rotation.x += (e.clientY-prevY)*0.005;
        prevX=e.clientX; prevY=e.clientY;
      });
      

// ===============================
// iOS Single-Finger Drag Rotation
// ===============================

      let touchDragging = false;
      let touchPrevX = 0;
      let touchPrevY = 0;
      
      window.addEventListener("touchstart", (e) => {  
        if (e.touches.length === 1) {
          touchDragging = true;
          touchPrevX = e.touches[0].clientX;
          touchPrevY = e.touches[0].clientY;
          selectedCityIndex = null;
          isFocused = false;
        }  
      }, {passive: false });

      window.addEventListener("touchmove", (e) => {
        if (!touchDragging || e.touches.length !== 1) return; 
        e.preventDefault();

        const touchX = e.touches[0].clientX;
        const touchY = e.touches[0].clientY;

        scene.rotation.y += (touchX - touchPrevX) * 0.005;
        scene.rotation.x += (touchY - touchPrevY) * 0.005;

        scene.rotation.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, scene.rotation.x));

        touchPrevX = touchX;
        touchPrevY = touchY;

      }, { passive: false });

      window.addEventListener("touchend", () => {
        touchDragging = false;
      });  



      /* ===============================
         Zoom controls: wheel, trackpad pinch, iOS pinch
      =============================== */

      window.addEventListener("wheel", e => {
        e.preventDefault();
        zoomVelocity += e.deltaY * 0.0006;
      }, { passive: false });


      let initialPinchDistance = null;

      function getDistance(touches) {
        return Math.sqrt(
          (touches[0].clientX - touches[1].clientX) ** 2 +
          (touches[0].clientY - touches[1].clientY) ** 2
        );
      }

      window.addEventListener("touchstart", e => {
        if (e.touches.length === 2) {
          initialPinchDistance = getDistance(e.touches);
        }
      }, { passive: false });

      window.addEventListener("touchmove", e => {
        if (e.touches.length === 2 && initialPinchDistance !== null) {

          e.preventDefault();

          const currentDistance = getDistance(e.touches);
          const delta = initialPinchDistance - currentDistance;

          // Add inertia instead of direct zoom
          zoomVelocity += delta * 0.0008;

          initialPinchDistance = currentDistance;
        }
      }, { passive: false });

      window.addEventListener("touchend", e => {
        if (e.touches.length < 2) {
          initialPinchDistance = null;
        }
      });

      /* ===============================
   Generate Compass Ticks (16 divisions)
=============================== */

const tickGroup = document.querySelector(".compass-ticks");

if (tickGroup) {

  for (let i = 0; i < 16; i++) {

    const angle = (i / 16) * Math.PI * 2;

    const innerRadius = i % 4 === 0 ? 30 : 36; // major every 4
    const outerRadius = 44;

    const x1 = 50 + innerRadius * Math.cos(angle);
    const y1 = 50 + innerRadius * Math.sin(angle);

    const x2 = 50 + outerRadius * Math.cos(angle);
    const y2 = 50 + outerRadius * Math.sin(angle);

    const line = document.createElementNS(
      "http://www.w3.org/2000/svg",
      "line"
    );

    line.setAttribute("x1", x1);
    line.setAttribute("y1", y1);
    line.setAttribute("x2", x2);
    line.setAttribute("y2", y2);

    line.setAttribute(
      "class",
      i % 4 === 0 ? "compass-tick major" : "compass-tick"
    );

    tickGroup.appendChild(line);
  }

}



      /* ===============================
         SEARCH MODULE
      =============================== */

      const searchInput = document.getElementById("citySearch");
      const resultsContainer = document.getElementById("searchResults");

      searchInput.addEventListener("input", () => {

        const query = searchInput.value.trim().toLowerCase();

        if (query.length < 2) {
          resultsContainer.style.display = "none";
          return;
        }

        const matches = cities
          .filter(city => city.name.toLowerCase().startsWith(query))
          .slice(0, 5);

        resultsContainer.innerHTML = "";

        matches.forEach(city => {

          const div = document.createElement("div");
          div.className = "searchItem";
          div.textContent = (city.country && city.name !== city.country)
            ? `${city.name}, ${city.country}`
            : city.name;


          div.addEventListener("click", () => {

            focusCity(city);
            resultsContainer.style.display = "none";
            searchInput.value = city.name;

          });

          resultsContainer.appendChild(div);
        });

        resultsContainer.style.display = matches.length ? "block" : "none";
      });

      window.addEventListener("click", (e) => {
        if (!document.getElementById("searchContainer").contains(e.target)) {
          resultsContainer.style.display = "none";
        }
      });


      /* ===============================
         FOCUS CITY ROTATION
      =============================== */

      let targetQuaternion = null;

      function focusCity(city) {

        const index = cities.findIndex(c => c.name === city.name);
        selectedCityIndex = index;

        const phi = (90 - city.lat) * (Math.PI / 180);
        const theta = (city.lon + 180) * (Math.PI / 180);

        const cityAltitude = 0.02; // small offset above surface

        const x = -(radius + cityAltitude) * Math.sin(phi) * Math.cos(theta);
        const z =  (radius + cityAltitude) * Math.sin(phi) * Math.sin(theta);
        const y =  (radius + cityAltitude) * Math.cos(phi);


        const cityVector = new THREE.Vector3(x, y, z).normalize();
        const target = new THREE.Vector3(0, 0, 1);

        targetQuaternion = new THREE.Quaternion()
          .setFromUnitVectors(cityVector, target);

        targetZoom = 2; // auto zoom slightly closer    

        const ringAltitude = 0.03;

        const ringX = -(radius + ringAltitude) * Math.sin(phi) * Math.cos(theta);
        const ringZ =  (radius + ringAltitude) * Math.sin(phi) * Math.sin(theta);
        const ringY =  (radius + ringAltitude) * Math.cos(phi);

        ringGroup.position.set(ringX, ringY, ringZ);
        ringGroup.lookAt(0, 0, 0);
        ringStates.forEach((state, i) => {
          state.progress = 0;
          state.delay = i * ringBurstDelay;
          state.active = true;

          ringMeshes[i].scale.set(1, 1, 1);
          ringMeshes[i].material.opacity = 0;
        });



      }


      // Animation loop
      function animate(){
        requestAnimationFrame(animate);

        if (targetQuaternion) {
          scene.quaternion.slerp(targetQuaternion, 0.08);

          if (scene.quaternion.angleTo(targetQuaternion) < 0.001) {
            scene.quaternion.copy(targetQuaternion);
            targetQuaternion = null;



            glowPulseTime = 0;
            glowPulseActive = true;

          }
        }

        if (!dragging && !targetQuaternion && !isFocused) {
          scene.rotateY(0.0002);
        }

        zoomVelocity *= zoomFriction;
        targetZoom += zoomVelocity;
        targetZoom = Math.max(1.5, Math.min(5, targetZoom));

        const zoomDelta = targetZoom - camera.position.z;

        const easingStrength = 0.08;
        const dynamicEasing = easingStrength * Math.min(Math.abs(zoomDelta) * 2, 1);

        camera.position.z += zoomDelta * dynamicEasing;


        updateCityGlow(); 
        updateHoverLabels();

        // ------------------------------
        // Leader Line Projection
        // ------------------------------
        const panelOpen = document.getElementById("infoPanel")
          .classList.contains("active");
         
        const hoveringDifferentCity =
          hoveredIndex !== null &&
          hoveredIndex !== selectedCityIndex;  

        if (hoveredCityPosition && (!panelOpen || hoveringDifferentCity)) {


          const vector = hoveredCityPosition.clone();
          vector.project(camera);

          const x = (vector.x * 0.5 + 0.5) * window.innerWidth;
          const y = (-vector.y * 0.5 + 0.5) * window.innerHeight;

          updateHoverLine(x, y);

        } else {

          hideHoverLine();

        }        

        // ------------------------------
        // Ring Burst Animation
        // ------------------------------

        if (isFocused && selectedCityIndex !== null) {

          ringStates.forEach((state, i) => {

            if (!state.active) return;

            if (state.delay > 0) {
              state.delay -= ringSpeed;
              return;
            }

            state.progress += ringSpeed;

            const maxScale = ringMultiplierMax;
            const scale = 1 + state.progress * (maxScale - 1);

            ringMeshes[i].scale.set(scale, scale, scale);

            const opacity = Math.pow(1 - state.progress, 1.8);
            ringMeshes[i].material.opacity = opacity;

            if (state.progress >= 1) {
              ringMeshes[i].material.opacity = 0;
              state.active = false;
            }

          });

        } else {

          ringMeshes.forEach(ring => {
            ring.material.opacity = 0;
          });

        }

        if (glowPulseActive) {

          glowPulseTime += 0.03;

          if (glowPulseTime >= 1) {
            glowPulseActive = false;
          }

        }        
        // ------------------------------
        // Earth Twinkle Update (Smooth)
        // ------------------------------

        const earthColorAttr = earthPoints.geometry.attributes.color;

        for (let i = 0; i < earthTwinkleTimers.length; i++) {

          if (earthTwinkleTimers[i] <= 0 && Math.random() < earthTwinkleChance) {
            earthTwinkleTimers[i] = earthTwinkleDuration;
          }

          let brightness = earthBaseBrightness[i];

          if (earthTwinkleTimers[i] > 0) {

            const t = earthTwinkleTimers[i] / earthTwinkleDuration;

            // smooth fade in/out curve
            const fade = Math.sin(t * Math.PI);

            brightness *= (1 - earthTwinkleIntensity * fade);

            earthTwinkleTimers[i] -= 0.016;
          }

          earthColorAttr.setXYZ(i, brightness, brightness, brightness);
        }

        earthColorAttr.needsUpdate = true;

        if (compassSVG) {

          const euler = new THREE.Euler().setFromQuaternion(scene.quaternion);

          compassSVG.style.transform = `rotate(${-euler.y}rad)`;

        }


        renderer.render(scene,camera);
        }

      animate();
    }

    class GeoBoundaryLayer {

      constructor(scene, radius) {
        this.scene = scene;
        this.radius = radius;
        this.group = new THREE.Group();
        this.scene.add(this.group);
      }

      latLonToVector3(lat, lon, altitude = 0.01) {

        const phi = (90 - lat) * (Math.PI / 180);
        const theta = (lon + 180) * (Math.PI / 180);

        const r = this.radius + altitude;

        const x = -r * Math.sin(phi) * Math.cos(theta);
        const z =  r * Math.sin(phi) * Math.sin(theta);
        const y =  r * Math.cos(phi);

        return new THREE.Vector3(x, y, z);
      }

      loadGeoJSON(geojson) {

        geojson.features.forEach(feature => {

          const geometry = feature.geometry;

          if (geometry.type === "Polygon") {
            this.drawPolygon(geometry.coordinates);
          }

          if (geometry.type === "MultiPolygon") {
            geometry.coordinates.forEach(polygon => {
              this.drawPolygon(polygon);
            });
          }

        });
      }

    drawPolygon(polygon) {

      polygon.forEach(ring => {

        const points = [];

        ring.forEach(coord => {
          const [lon, lat] = coord;
          points.push(this.latLonToVector3(lat, lon));
        });

        const geometry = new THREE.BufferGeometry().setFromPoints(points);

        const material = new THREE.ShaderMaterial({
          transparent: true,
          uniforms: {
            color: { value: new THREE.Color(0xffffff) },
            opacity: { value: 0.99 }
          },
          vertexShader: `
            varying float vDot;

            void main() {

              vec4 worldPosition = modelMatrix * vec4(position, 1.0);
              vec3 normal = normalize(worldPosition.xyz);

              vec3 cameraDir = normalize(cameraPosition - worldPosition.xyz);

              vDot = dot(normal, cameraDir);

              gl_Position = projectionMatrix * viewMatrix * worldPosition;
            }
          `,
          fragmentShader: `
            uniform vec3 color;
            uniform float opacity;
            varying float vDot;

            void main() {

              float shade = clamp(vDot, 0.0, 1.0);

              float shadowStrength = 0.6;
              float finalShade = mix(1.0 - shadowStrength, 1.0, shade);

              gl_FragColor = vec4(color * finalShade, opacity * finalShade);
            }
          `
        });

        const line = new THREE.Line(geometry, material);
        this.group.add(line);

      });
    }


    setVisible(value) {
      this.group.visible = value;
    }

    setColor(color) {
      this.group.children.forEach(child => {
        child.material.uniforms.color.value.set(color);
      });
    }

  }



  </script>
</body>
</html>